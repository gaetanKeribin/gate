{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import FlatList from\"react-native-web/dist/exports/FlatList\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import{Avatar,Icon}from\"react-native-elements\";import theme from\"../../Theme.json\";import{fetchUsers}from\"../../actions/usersActions\";import _ from\"lodash\";import{apiConfig}from\"../../config\";import CustomInput from\"../CustomInput\";var Item=function Item(_ref){var item=_ref.item,navigation=_ref.navigation;if(!item)return null;return React.createElement(TouchableOpacity,{onPress:function onPress(){navigation.navigate(\"Read\",{id:item._id,item:item});}},React.createElement(View,{style:{paddingHorizontal:20,borderBottomWidth:1,borderBottomColor:theme.colors.grey4,paddingVertical:16,flexDirection:\"row\"}},React.createElement(View,{style:{alignContent:\"center\",justifyContent:\"center\",alignItems:\"center\",marginRight:12}},item.avatar?React.createElement(Avatar,{source:{uri:apiConfig.baseUrl+\"/api/files/avatars/\"+item.avatar},size:\"medium\"}):React.createElement(Avatar,{size:\"medium\",title:item.firstname[0].concat(item.lastname[0]).toUpperCase()})),React.createElement(View,null,React.createElement(Text,{style:{textAlignVertical:\"bottom\",fontWeight:\"bold\",fontSize:16}},_.capitalize(item.firstname),\" \",_.capitalize(item.lastname)),item.jobTitle&&React.createElement(View,{style:{flexDirection:\"row\",flex:1,alignItems:\"center\"}},React.createElement(Icon,{name:\"account-card-details\",size:20}),React.createElement(Text,{style:{textAlignVertical:\"bottom\",marginStart:8}},item.jobTitle,\" - \",item.organisation)),item.promo&&React.createElement(View,{style:{flexDirection:\"row\",flex:1,alignItems:\"center\"}},React.createElement(Icon,{name:\"school\",size:20}),React.createElement(Text,{style:{textAlignVertical:\"bottom\",marginStart:8}},\"SIEE promotion \",item.promo)))));};var PeopleScreen=function PeopleScreen(_ref2){var _users$users;var navigation=_ref2.navigation;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),users=_useSelector.users;useEffect(function(){function fetchData(){dispatch(fetchUsers());}fetchData();},[]);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var searchableKeys=[\"firstname\",\"lastname\",\"organisation\",\"city\",\"country\",\"jobTitle\",\"promo\"];var data=users==null?void 0:(_users$users=users.users)==null?void 0:_users$users.filter(function(u){var a=false;searchableKeys.every(function(sk,i){if((\"\"+u[sk]).toLowerCase().search(search.toLowerCase())>-1)a=true;if(a===true)return false;else return true;});return a;});return React.createElement(View,{style:{flex:1,flexDirection:\"row\"}},React.createElement(View,{style:{flex:1}}),React.createElement(View,{style:{width:Dimensions.get(\"window\").width<500?Dimensions.get(\"window\").width:500}},React.createElement(View,{style:{padding:8,backgroundColor:\"white\",borderColor:\"lightgrey\",margin:12,borderRadius:4,borderWidth:1}},React.createElement(CustomInput,{onChangeText:setSearch,placeholder:\"John, Doe, Paris, KPMG...\",value:search,leftIcon:\"magnify\"})),useSelector(function(state){return state.users.isLoaded;})?React.createElement(FlatList,{style:{backgroundColor:\"white\",borderColor:\"lightgrey\",borderWidth:1,margin:12,borderRadius:4},data:data,renderItem:function renderItem(_ref3){var item=_ref3.item;return React.createElement(Item,{item:item,navigation:navigation});},keyExtractor:function keyExtractor(item){return item._id;}}):React.createElement(View,{style:{flex:1,alignContent:\"center\",justifyContent:\"center\"}},React.createElement(ActivityIndicator,{size:\"large\"}))),React.createElement(View,{style:{flex:1}}));};export default PeopleScreen;","map":{"version":3,"sources":["/home/gaetan/Documents/GATE/app/client/src/components/People/PeopleListScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Avatar","Icon","theme","fetchUsers","_","apiConfig","CustomInput","Item","item","navigation","navigate","id","_id","paddingHorizontal","borderBottomWidth","borderBottomColor","colors","grey4","paddingVertical","flexDirection","alignContent","justifyContent","alignItems","marginRight","avatar","uri","baseUrl","firstname","concat","lastname","toUpperCase","textAlignVertical","fontWeight","fontSize","capitalize","jobTitle","flex","marginStart","organisation","promo","PeopleScreen","dispatch","state","users","fetchData","search","setSearch","searchableKeys","data","filter","u","a","every","sk","i","toLowerCase","width","Dimensions","get","padding","backgroundColor","borderColor","margin","borderRadius","borderWidth","isLoaded"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  View,\n  Text,\n  ActivityIndicator,\n  FlatList,\n  TouchableOpacity,\n  Dimensions,\n} from \"react-native\";\nimport { Avatar, Icon } from \"react-native-elements\";\nimport theme from \"../../Theme.json\";\nimport { fetchUsers } from \"../../actions/usersActions\";\nimport _ from \"lodash\";\nimport { apiConfig } from \"../../config\";\nimport CustomInput from \"../CustomInput\";\n\nconst Item = ({ item, navigation }) => {\n  if (!item) return null;\n  return (\n    <TouchableOpacity\n      onPress={() => {\n        navigation.navigate(\"Read\", { id: item._id, item });\n      }}\n    >\n      <View\n        style={{\n          paddingHorizontal: 20,\n          borderBottomWidth: 1,\n          borderBottomColor: theme.colors.grey4,\n          paddingVertical: 16,\n          flexDirection: \"row\",\n        }}\n      >\n        <View\n          style={{\n            alignContent: \"center\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            marginRight: 12,\n          }}\n        >\n          {item.avatar ? (\n            <Avatar\n              source={{\n                uri: `${apiConfig.baseUrl}/api/files/avatars/${item.avatar}`,\n              }}\n              size=\"medium\"\n            />\n          ) : (\n            <Avatar\n              size=\"medium\"\n              title={item.firstname[0].concat(item.lastname[0]).toUpperCase()}\n            />\n          )}\n        </View>\n        <View>\n          <Text\n            style={{\n              textAlignVertical: \"bottom\",\n              fontWeight: \"bold\",\n              fontSize: 16,\n            }}\n          >\n            {_.capitalize(item.firstname)} {_.capitalize(item.lastname)}\n          </Text>\n          {item.jobTitle && (\n            <View\n              style={{ flexDirection: \"row\", flex: 1, alignItems: \"center\" }}\n            >\n              <Icon name=\"account-card-details\" size={20} />\n              <Text style={{ textAlignVertical: \"bottom\", marginStart: 8 }}>\n                {item.jobTitle} - {item.organisation}\n              </Text>\n            </View>\n          )}\n          {item.promo && (\n            <View\n              style={{ flexDirection: \"row\", flex: 1, alignItems: \"center\" }}\n            >\n              <Icon name=\"school\" size={20} />\n              <Text style={{ textAlignVertical: \"bottom\", marginStart: 8 }}>\n                SIEE promotion {item.promo}\n              </Text>\n            </View>\n          )}\n        </View>\n      </View>\n    </TouchableOpacity>\n  );\n};\n\nconst PeopleScreen = ({ navigation }) => {\n  const dispatch = useDispatch();\n  const { users } = useSelector((state) => state);\n\n  useEffect(() => {\n    function fetchData() {\n      dispatch(fetchUsers());\n    }\n    fetchData();\n  }, []);\n  const [search, setSearch] = useState(\"\");\n\n  const searchableKeys = [\n    \"firstname\",\n    \"lastname\",\n    \"organisation\",\n    \"city\",\n    \"country\",\n    \"jobTitle\",\n    \"promo\",\n  ];\n\n  const data = users?.users?.filter((u) => {\n    let a = false;\n    searchableKeys.every((sk, i) => {\n      if (`${u[sk]}`.toLowerCase().search(search.toLowerCase()) > -1) a = true;\n      if (a === true) return false;\n      else return true;\n    });\n    return a;\n  });\n\n  return (\n    <View style={{ flex: 1, flexDirection: \"row\" }}>\n      <View style={{ flex: 1 }} />\n      <View\n        style={{\n          width:\n            Dimensions.get(\"window\").width < 500\n              ? Dimensions.get(\"window\").width\n              : 500,\n        }}\n      >\n        <View\n          style={{\n            padding: 8,\n            backgroundColor: \"white\",\n            borderColor: \"lightgrey\",\n            margin: 12,\n            borderRadius: 4,\n            borderWidth: 1,\n          }}\n        >\n          <CustomInput\n            onChangeText={setSearch}\n            placeholder=\"John, Doe, Paris, KPMG...\"\n            value={search}\n            leftIcon=\"magnify\"\n          />\n        </View>\n        {useSelector((state) => state.users.isLoaded) ? (\n          <FlatList\n            style={{\n              backgroundColor: \"white\",\n              borderColor: \"lightgrey\",\n              borderWidth: 1,\n              margin: 12,\n              borderRadius: 4,\n            }}\n            data={data}\n            renderItem={({ item }) => (\n              <Item item={item} navigation={navigation} />\n            )}\n            keyExtractor={(item) => item._id}\n          />\n        ) : (\n          <View\n            style={{\n              flex: 1,\n              alignContent: \"center\",\n              justifyContent: \"center\",\n            }}\n          >\n            <ActivityIndicator size=\"large\" />\n          </View>\n        )}\n      </View>\n      <View style={{ flex: 1 }} />\n    </View>\n  );\n};\n\nexport default PeopleScreen;\n"]},"metadata":{},"sourceType":"module"}