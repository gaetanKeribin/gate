{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect,useCallback}from\"react\";import{connect,useDispatch,useSelector}from\"react-redux\";import\"moment/locale/fr\";import moment from\"moment\";import _ from\"lodash\";import View from\"react-native-web/dist/exports/View\";import FlatList from\"react-native-web/dist/exports/FlatList\";import Text from\"react-native-web/dist/exports/Text\";import RefreshControl from\"react-native-web/dist/exports/RefreshControl\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import{Icon,Button}from\"react-native-elements\";import theme from\"../../Theme.json\";import{TouchableOpacity}from\"react-native-gesture-handler\";import{fetchJobs}from\"../../actions/jobsActions\";import CustomInput from\"../CustomInput\";var Item=function Item(_ref){var item=_ref.item,navigation=_ref.navigation;return React.createElement(TouchableOpacity,{onPress:function onPress(){return navigation.navigate(\"Read\",{job:item,id:item._id});}},React.createElement(View,{style:styles.itemContainer},React.createElement(View,{style:{flex:1}},React.createElement(Text,{style:{textAlignVertical:\"bottom\",fontWeight:\"bold\",fontSize:16}},item==null?void 0:item.jobTitle,\" en \",item==null?void 0:item.employmentType),React.createElement(View,{style:{flexDirection:\"row\",alignItems:\"center\"}},React.createElement(Icon,{name:\"briefcase\",size:20,color:\"grey\"}),React.createElement(Text,{style:{textAlignVertical:\"bottom\",marginStart:8}},item==null?void 0:item.organisation)),React.createElement(View,{style:{flexDirection:\"row\",flex:1,alignItems:\"center\"}},React.createElement(Icon,{name:\"map-marker\",size:20}),React.createElement(Text,{style:{textAlignVertical:\"bottom\",marginStart:8,flex:1}},_.capitalize(item==null?void 0:item.city)),React.createElement(Text,{color:\"grey\",style:{color:\"grey\",fontSize:10,textAlignVertical:\"bottom\"}},_.capitalize(moment(item==null?void 0:item.publishedAt).locale(\"fr\").fromNow()))))));};var JobsListScreen=function JobsListScreen(_ref2){var _jobs$jobs;var navigation=_ref2.navigation;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),refreshing=_useState2[0],setRefreshing=_useState2[1];var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),jobs=_useSelector.jobs;var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var searchableKeys=[\"jobTitle\",\"organisation\",\"city\",\"country\"];useEffect(function(){function fetchData(){dispatch(fetchJobs());}fetchData();},[]);var onRefresh=useCallback(function(){setRefreshing(true);fetchJobs();setRefreshing(false);},[refreshing]);var data=jobs==null?void 0:(_jobs$jobs=jobs.jobs)==null?void 0:_jobs$jobs.filter(function(u){var a=false;searchableKeys.every(function(sk,i){if((\"\"+u[sk]).toLowerCase().search(search.toLowerCase())>-1)a=true;if(a===true)return false;else return true;});return a;});return React.createElement(View,{style:{flex:1,flexDirection:\"row\"}},React.createElement(View,{style:{flex:1}}),React.createElement(View,{style:styles.container},React.createElement(View,{style:styles.searchBarContainer},React.createElement(CustomInput,{onChangeText:setSearch,placeholder:\"John, Doe, Paris, KPMG...\",value:search,leftIcon:\"magnify\"})),jobs.isLoaded?React.createElement(FlatList,{style:styles.FlatList,data:data,renderItem:function renderItem(_ref3){var item=_ref3.item;return React.createElement(Item,{item:item,navigation:navigation});},keyExtractor:function keyExtractor(item){return item==null?void 0:item._id;},refreshControl:React.createElement(RefreshControl,{refreshing:refreshing,onRefresh:onRefresh})}):React.createElement(View,{style:{flex:1,alignContent:\"center\",justifyContent:\"center\"}},React.createElement(ActivityIndicator,{size:\"large\"})),React.createElement(Button,{containerStyle:styles.addButton,buttonStyle:{borderRadius:60},icon:React.createElement(Icon,{name:\"plus\",size:40,color:\"white\"}),onPress:function onPress(){return navigation.navigate(\"Post\");}})),React.createElement(View,{style:{flex:1}}));};export default JobsListScreen;var styles=StyleSheet.create({container:{width:Dimensions.get(\"window\").width<500?Dimensions.get(\"window\").width:500},searchBarContainer:{padding:8,backgroundColor:\"white\",borderColor:\"lightgrey\",margin:12,borderRadius:4,borderWidth:1},FlatList:{backgroundColor:\"white\",borderColor:\"lightgrey\",borderWidth:1,margin:12,borderRadius:4},addButton:{shadowColor:\"grey\",shadowOffset:{width:0,height:0},shadowOpacity:0.5,shadowRadius:12,position:\"absolute\",alignSelf:\"center\",bottom:20},itemContainer:{paddingTop:8,paddingHorizontal:20,marginVertical:4,marginHorizontal:0,borderBottomWidth:1,borderBottomColor:theme.colors.grey4,paddingVertical:12,flexDirection:\"row\"}});","map":{"version":3,"sources":["/home/gaetan/Documents/GATE/app/client/src/components/Jobs/JobsListScreen.js"],"names":["React","useState","useEffect","useCallback","connect","useDispatch","useSelector","moment","_","Icon","Button","theme","TouchableOpacity","fetchJobs","CustomInput","Item","item","navigation","navigate","job","id","_id","styles","itemContainer","flex","textAlignVertical","fontWeight","fontSize","jobTitle","employmentType","flexDirection","alignItems","marginStart","organisation","capitalize","city","color","publishedAt","locale","fromNow","JobsListScreen","refreshing","setRefreshing","dispatch","state","jobs","search","setSearch","searchableKeys","fetchData","onRefresh","data","filter","u","a","every","sk","i","toLowerCase","container","searchBarContainer","isLoaded","FlatList","alignContent","justifyContent","addButton","borderRadius","StyleSheet","create","width","Dimensions","get","padding","backgroundColor","borderColor","margin","borderWidth","shadowColor","shadowOffset","height","shadowOpacity","shadowRadius","position","alignSelf","bottom","paddingTop","paddingHorizontal","marginVertical","marginHorizontal","borderBottomWidth","borderBottomColor","colors","grey4","paddingVertical"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { connect, useDispatch, useSelector } from \"react-redux\";\nimport \"moment/locale/fr\";\nimport moment from \"moment\";\nimport _ from \"lodash\";\nimport {\n  View,\n  FlatList,\n  Text,\n  RefreshControl,\n  ActivityIndicator,\n  StyleSheet,\n  Dimensions,\n} from \"react-native\";\nimport { Icon, Button } from \"react-native-elements\";\nimport theme from \"../../Theme.json\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { fetchJobs } from \"../../actions/jobsActions\";\nimport CustomInput from \"../CustomInput\";\n\nconst Item = ({ item, navigation }) => {\n  return (\n    <TouchableOpacity\n      onPress={() =>\n        navigation.navigate(\"Read\", {\n          job: item,\n          id: item._id,\n        })\n      }\n    >\n      <View style={styles.itemContainer}>\n        <View style={{ flex: 1 }}>\n          <Text\n            style={{\n              textAlignVertical: \"bottom\",\n              fontWeight: \"bold\",\n              fontSize: 16,\n            }}\n          >\n            {item?.jobTitle} en {item?.employmentType}\n          </Text>\n          <View style={{ flexDirection: \"row\", alignItems: \"center\" }}>\n            <Icon name=\"briefcase\" size={20} color=\"grey\" />\n            <Text style={{ textAlignVertical: \"bottom\", marginStart: 8 }}>\n              {item?.organisation}\n            </Text>\n          </View>\n          <View style={{ flexDirection: \"row\", flex: 1, alignItems: \"center\" }}>\n            <Icon name=\"map-marker\" size={20} />\n            <Text\n              style={{ textAlignVertical: \"bottom\", marginStart: 8, flex: 1 }}\n            >\n              {_.capitalize(item?.city)}\n            </Text>\n            <Text\n              color=\"grey\"\n              style={{\n                color: \"grey\",\n                fontSize: 10,\n                textAlignVertical: \"bottom\",\n              }}\n            >\n              {_.capitalize(moment(item?.publishedAt).locale(\"fr\").fromNow())}\n            </Text>\n          </View>\n        </View>\n      </View>\n    </TouchableOpacity>\n  );\n};\n\nconst JobsListScreen = ({ navigation }) => {\n  const [refreshing, setRefreshing] = useState(false);\n  const dispatch = useDispatch();\n  const { jobs } = useSelector((state) => state);\n\n  const [search, setSearch] = useState(\"\");\n  const searchableKeys = [\"jobTitle\", \"organisation\", \"city\", \"country\"];\n\n  useEffect(() => {\n    function fetchData() {\n      dispatch(fetchJobs());\n    }\n    fetchData();\n  }, []);\n\n  const onRefresh = useCallback(() => {\n    setRefreshing(true);\n    fetchJobs();\n    setRefreshing(false);\n  }, [refreshing]);\n\n  const data = jobs?.jobs?.filter((u) => {\n    let a = false;\n    searchableKeys.every((sk, i) => {\n      if (`${u[sk]}`.toLowerCase().search(search.toLowerCase()) > -1) a = true;\n      if (a === true) return false;\n      else return true;\n    });\n    return a;\n  });\n\n  return (\n    <View style={{ flex: 1, flexDirection: \"row\" }}>\n      <View style={{ flex: 1 }} />\n      <View style={styles.container}>\n        <View style={styles.searchBarContainer}>\n          <CustomInput\n            onChangeText={setSearch}\n            placeholder=\"John, Doe, Paris, KPMG...\"\n            value={search}\n            leftIcon=\"magnify\"\n          />\n        </View>\n        {jobs.isLoaded ? (\n          <FlatList\n            style={styles.FlatList}\n            data={data}\n            renderItem={({ item }) => (\n              <Item item={item} navigation={navigation} />\n            )}\n            keyExtractor={(item) => item?._id}\n            refreshControl={\n              <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\n            }\n          />\n        ) : (\n          <View\n            style={{\n              flex: 1,\n              alignContent: \"center\",\n              justifyContent: \"center\",\n            }}\n          >\n            <ActivityIndicator size=\"large\" />\n          </View>\n        )}\n        <Button\n          containerStyle={styles.addButton}\n          buttonStyle={{ borderRadius: 60 }}\n          icon={<Icon name=\"plus\" size={40} color=\"white\" />}\n          onPress={() => navigation.navigate(\"Post\")}\n        />\n      </View>\n      <View style={{ flex: 1 }} />\n    </View>\n  );\n};\n\nexport default JobsListScreen;\n\nconst styles = StyleSheet.create({\n  container: {\n    width:\n      Dimensions.get(\"window\").width < 500\n        ? Dimensions.get(\"window\").width\n        : 500,\n  },\n  searchBarContainer: {\n    padding: 8,\n    backgroundColor: \"white\",\n    borderColor: \"lightgrey\",\n    margin: 12,\n    borderRadius: 4,\n    borderWidth: 1,\n  },\n  FlatList: {\n    backgroundColor: \"white\",\n    borderColor: \"lightgrey\",\n    borderWidth: 1,\n    margin: 12,\n    borderRadius: 4,\n  },\n  addButton: {\n    shadowColor: \"grey\",\n    shadowOffset: { width: 0, height: 0 },\n    shadowOpacity: 0.5,\n    shadowRadius: 12,\n    position: \"absolute\",\n    alignSelf: \"center\",\n    bottom: 20,\n  },\n  itemContainer: {\n    paddingTop: 8,\n    paddingHorizontal: 20,\n    marginVertical: 4,\n    marginHorizontal: 0,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.grey4,\n    paddingVertical: 12,\n    flexDirection: \"row\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}