{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState}from\"react\";import{connect}from\"react-redux\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import{Input,Button,Icon,Divider}from\"react-native-elements\";import{signUp as _signUp}from\"../actions/authActions\";import{notifyUser as _notifyUser}from\"../actions/notifyActions\";var SignUpScreen=function SignUpScreen(_ref){var switchPanel=_ref.switchPanel,signUp=_ref.signUp,auth=_ref.auth;var _useState=useState(\"John\"),_useState2=_slicedToArray(_useState,2),firstname=_useState2[0],setFirstname=_useState2[1];var _useState3=useState(\"Doe\"),_useState4=_slicedToArray(_useState3,2),lastname=_useState4[0],setLastname=_useState4[1];var _useState5=useState(\"johndoe@gmail.com\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"12345678\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(\"12345678\"),_useState10=_slicedToArray(_useState9,2),confirmation=_useState10[0],setConfirmation=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];var handleSignUp=function handleSignUp(){return _regeneratorRuntime.async(function handleSignUp$(_context){while(1){switch(_context.prev=_context.next){case 0:if(firstname){_context.next=4;break;}return _context.abrupt(\"return\",setErrorMessage({firstname:\"Prénom manquant.\"}));case 4:if(lastname){_context.next=8;break;}return _context.abrupt(\"return\",setErrorMessage({lastname:\"Nom manquant.\"}));case 8:if(email){_context.next=12;break;}return _context.abrupt(\"return\",setErrorMessage({mail:\"Mél manquant.\"}));case 12:if(!(password.length<8===true)){_context.next=16;break;}return _context.abrupt(\"return\",setErrorMessage({password:\"Mot de passe manquant.\"}));case 16:if(!(password!==confirmation)){_context.next=18;break;}return _context.abrupt(\"return\",setErrorMessage({confirmation:\"Veuillez retaper la confirmation de votre mot de passe.\"}));case 18:signUp({email:email,password:password,firstname:firstname,lastname:lastname});case 19:case\"end\":return _context.stop();}}},null,null,null,Promise);};return React.createElement(View,{style:styles.container},React.createElement(Input,{placeholder:\"Pr\\xE9nom\",value:firstname,onChangeText:function onChangeText(value){return setFirstname(value);},label:\"Pr\\xE9nom\",errorMessage:errorMessage.firstname}),React.createElement(Input,{placeholder:\"Nom\",value:lastname,onChangeText:function onChangeText(value){return setLastname(value);},label:\"Nom\",errorMessage:errorMessage.lastname}),React.createElement(Input,{placeholder:\"Email\",leftIcon:React.createElement(Icon,{name:\"email\",type:\"material-community\"}),value:email,onChangeText:function onChangeText(value){return setEmail(value);},label:\"Email\",errorMessage:errorMessage.email}),React.createElement(Input,{placeholder:\"Mot de passe\",leftIcon:React.createElement(Icon,{name:\"lock\"}),label:\"Mot de passe\",secureTextEntry:true,value:password,onChangeText:function onChangeText(value){return setPassword(value);},errorMessage:errorMessage.password}),React.createElement(Input,{placeholder:\"Mot de passe\",leftIcon:React.createElement(Icon,{name:confirmation!==password||password.length<8?\"close\":\"check\",color:confirmation!==password||password.length<8?\"red\":\"green\"}),label:\"Confirmation\",secureTextEntry:true,value:confirmation,leftIconContainerStyle:{marginRight:12},containerStyle:{marginBottom:40,marginTop:8},onChangeText:function onChangeText(value){return setConfirmation(value);},errorMessage:errorMessage.confirmation}),React.createElement(Button,{title:\"S'inscrire\",onPress:handleSignUp,loading:auth.isSigningUp,containerStyle:{marginBottom:20,marginTop:8}}),React.createElement(Button,{title:\"D\\xE9j\\xE0 enregistr\\xE9? Je me connecte.\",type:\"clear\",onPress:switchPanel,containerStyle:{marginBottom:30}}));};var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{signUp:function signUp(credentials){return dispatch(_signUp(credentials));},notifyUser:function notifyUser(notification){return dispatch(_notifyUser(notification));}};};export default connect(mapStateToProps,mapDispatchToProps)(SignUpScreen);var styles=StyleSheet.create({container:{flex:1,justifyContent:\"center\",alignItems:\"center\",paddingHorizontal:12},textInput:{height:40,borderColor:\"gray\",borderWidth:1,marginTop:8}});","map":{"version":3,"sources":["/home/gaetan/Documents/GATE/app/frontend/src/components/SignUpScreen.js"],"names":["React","useState","connect","Input","Button","Icon","Divider","signUp","notifyUser","SignUpScreen","switchPanel","auth","firstname","setFirstname","lastname","setLastname","email","setEmail","password","setPassword","confirmation","setConfirmation","errorMessage","setErrorMessage","handleSignUp","mail","length","styles","container","value","marginRight","marginBottom","marginTop","isSigningUp","mapStateToProps","state","mapDispatchToProps","dispatch","credentials","notification","StyleSheet","create","flex","justifyContent","alignItems","paddingHorizontal","textInput","height","borderColor","borderWidth"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { View, Text, StyleSheet } from \"react-native\";\nimport { Input, Button, Icon, Divider } from \"react-native-elements\";\nimport { signUp } from \"../actions/authActions\";\nimport { notifyUser } from \"../actions/notifyActions\";\n\nconst SignUpScreen = ({ switchPanel, signUp, auth }) => {\n  const [firstname, setFirstname] = useState(\"John\");\n  const [lastname, setLastname] = useState(\"Doe\");\n  const [email, setEmail] = useState(\"johndoe@gmail.com\");\n  const [password, setPassword] = useState(\"12345678\");\n  const [confirmation, setConfirmation] = useState(\"12345678\");\n  const [errorMessage, setErrorMessage] = useState({});\n\n  const handleSignUp = async () => {\n    if (!firstname) {\n      return setErrorMessage({ firstname: \"Prénom manquant.\" });\n    } else if (!lastname) {\n      return setErrorMessage({ lastname: \"Nom manquant.\" });\n    } else if (!email) {\n      return setErrorMessage({ mail: \"Mél manquant.\" });\n    } else if (password.length < 8 === true) {\n      return setErrorMessage({ password: \"Mot de passe manquant.\" });\n    } else if (password !== confirmation) {\n      return setErrorMessage({\n        confirmation: \"Veuillez retaper la confirmation de votre mot de passe.\"\n      });\n    }\n\n    signUp({ email, password, firstname, lastname });\n  };\n\n  return (\n    <View style={styles.container}>\n      <Input\n        placeholder=\"Prénom\"\n        value={firstname}\n        onChangeText={value => setFirstname(value)}\n        label=\"Prénom\"\n        errorMessage={errorMessage.firstname}\n      />\n      <Input\n        placeholder=\"Nom\"\n        value={lastname}\n        onChangeText={value => setLastname(value)}\n        label=\"Nom\"\n        errorMessage={errorMessage.lastname}\n      />\n      <Input\n        placeholder=\"Email\"\n        leftIcon={<Icon name=\"email\" type=\"material-community\" />}\n        value={email}\n        onChangeText={value => setEmail(value)}\n        label=\"Email\"\n        errorMessage={errorMessage.email}\n      />\n      <Input\n        placeholder=\"Mot de passe\"\n        leftIcon={<Icon name=\"lock\" />}\n        label=\"Mot de passe\"\n        secureTextEntry\n        value={password}\n        onChangeText={value => setPassword(value)}\n        errorMessage={errorMessage.password}\n      />\n      <Input\n        placeholder=\"Mot de passe\"\n        leftIcon={\n          <Icon\n            name={\n              confirmation !== password || password.length < 8\n                ? \"close\"\n                : \"check\"\n            }\n            color={\n              confirmation !== password || password.length < 8 ? \"red\" : \"green\"\n            }\n          />\n        }\n        label=\"Confirmation\"\n        secureTextEntry\n        value={confirmation}\n        leftIconContainerStyle={{ marginRight: 12 }}\n        containerStyle={{ marginBottom: 40, marginTop: 8 }}\n        onChangeText={value => setConfirmation(value)}\n        errorMessage={errorMessage.confirmation}\n      />\n      <Button\n        title=\"S'inscrire\"\n        onPress={handleSignUp}\n        loading={auth.isSigningUp}\n        containerStyle={{ marginBottom: 20, marginTop: 8 }}\n      />\n      <Button\n        title=\"Déjà enregistré? Je me connecte.\"\n        type=\"clear\"\n        onPress={switchPanel}\n        containerStyle={{ marginBottom: 30 }}\n      />\n    </View>\n  );\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    signUp: credentials => dispatch(signUp(credentials)),\n    notifyUser: notification => dispatch(notifyUser(notification))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUpScreen);\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    paddingHorizontal: 12\n  },\n  textInput: {\n    height: 40,\n    borderColor: \"gray\",\n    borderWidth: 1,\n    marginTop: 8\n  }\n});\n"]},"metadata":{},"sourceType":"module"}