{"ast":null,"code":"export var dataURLtoBlob=function dataURLtoBlob(dataurl){var arr=dataurl.split(\",\"),mime=arr[0].match(/:(.*?);/)[1],bstr=atob(arr[1]),n=bstr.length,u8arr=new Uint8Array(n);while(n--){u8arr[n]=bstr.charCodeAt(n);}return new Blob([u8arr],{type:mime});};export var fetchFile=function fetchFile(bucketName,fileId){return{type:\"REQUEST_FILE\",route:\"files/\"+bucketName+\"/\"+fileId,method:\"GET\"};};export var deleteFile=function deleteFile(bucketName,fileId){return{type:\"REQUEST_DELETE_FILE\",route:\"files/\"+bucketName+\"/\"+fileId,method:\"DELETE\",successNotification:{message:\"Votre document a bien été supprimé de la base de données.\",variant:\"success\",timeout:2000},errorNotification:{message:\"Cela n'a pas marché... Essayez de nouveau.\",variant:\"error\",timeout:2000}};};export var uploadFile=function uploadFile(blob,bucketName,name){var formData=new FormData();formData.append(\"file\",blob);name&&formData.append(\"name\",name);return{type:\"REQUEST_UPLOAD_FILE\",route:\"files/\"+bucketName,payload:formData,method:\"POST\",errorNotification:{message:\"Cela n'a pas marché... Essayez de nouveau.\",variant:\"error\",timeout:2000}};};","map":{"version":3,"sources":["/home/gaetan/Documents/GATE/app/client/src/actions/filesActions.js"],"names":["dataURLtoBlob","dataurl","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","Blob","type","fetchFile","bucketName","fileId","route","method","deleteFile","successNotification","message","variant","timeout","errorNotification","uploadFile","blob","name","formData","FormData","append","payload"],"mappings":"AAAA,MAAO,IAAMA,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,OAAD,CAAa,CACxC,GAAIC,CAAAA,GAAG,CAAGD,OAAO,CAACE,KAAR,CAAc,GAAd,CAAV,CACEC,IAAI,CAAGF,GAAG,CAAC,CAAD,CAAH,CAAOG,KAAP,CAAa,SAAb,EAAwB,CAAxB,CADT,CAEEC,IAAI,CAAGC,IAAI,CAACL,GAAG,CAAC,CAAD,CAAJ,CAFb,CAGEM,CAAC,CAAGF,IAAI,CAACG,MAHX,CAIEC,KAAK,CAAG,GAAIC,CAAAA,UAAJ,CAAeH,CAAf,CAJV,CAKA,MAAOA,CAAC,EAAR,CAAY,CACVE,KAAK,CAACF,CAAD,CAAL,CAAWF,IAAI,CAACM,UAAL,CAAgBJ,CAAhB,CAAX,CACD,CACD,MAAO,IAAIK,CAAAA,IAAJ,CAAS,CAACH,KAAD,CAAT,CAAkB,CAAEI,IAAI,CAAEV,IAAR,CAAlB,CAAP,CACD,CAVM,CAYP,MAAO,IAAMW,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,UAAD,CAAaC,MAAb,CAAwB,CAC/C,MAAO,CACLH,IAAI,CAAE,cADD,CAELI,KAAK,UAAWF,UAAX,KAAyBC,MAFzB,CAGLE,MAAM,CAAE,KAHH,CAAP,CAKD,CANM,CAQP,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACJ,UAAD,CAAaC,MAAb,CAAwB,CAChD,MAAO,CACLH,IAAI,CAAE,qBADD,CAELI,KAAK,UAAWF,UAAX,KAAyBC,MAFzB,CAGLE,MAAM,CAAE,QAHH,CAILE,mBAAmB,CAAE,CACnBC,OAAO,CAAE,2DADU,CAEnBC,OAAO,CAAE,SAFU,CAGnBC,OAAO,CAAE,IAHU,CAJhB,CASLC,iBAAiB,CAAE,CACjBH,OAAO,CAAE,4CADQ,CAEjBC,OAAO,CAAE,OAFQ,CAGjBC,OAAO,CAAE,IAHQ,CATd,CAAP,CAeD,CAhBM,CAkBP,MAAO,IAAME,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,IAAD,CAAOX,UAAP,CAAmBY,IAAnB,CAA4B,CACpD,GAAIC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAf,CAGAD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBJ,IAAxB,EAMAC,IAAI,EAAIC,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBH,IAAxB,CAAR,CAEA,MAAO,CACLd,IAAI,CAAE,qBADD,CAELI,KAAK,UAAWF,UAFX,CAGLgB,OAAO,CAAEH,QAHJ,CAILV,MAAM,CAAE,MAJH,CAKLM,iBAAiB,CAAE,CACjBH,OAAO,CAAE,4CADQ,CAEjBC,OAAO,CAAE,OAFQ,CAGjBC,OAAO,CAAE,IAHQ,CALd,CAAP,CAWD,CAvBM","sourcesContent":["export const dataURLtoBlob = (dataurl) => {\n  var arr = dataurl.split(\",\"),\n    mime = arr[0].match(/:(.*?);/)[1],\n    bstr = atob(arr[1]),\n    n = bstr.length,\n    u8arr = new Uint8Array(n);\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n  return new Blob([u8arr], { type: mime });\n};\n\nexport const fetchFile = (bucketName, fileId) => {\n  return {\n    type: \"REQUEST_FILE\",\n    route: `files/${bucketName}/${fileId}`,\n    method: \"GET\",\n  };\n};\n\nexport const deleteFile = (bucketName, fileId) => {\n  return {\n    type: \"REQUEST_DELETE_FILE\",\n    route: `files/${bucketName}/${fileId}`,\n    method: \"DELETE\",\n    successNotification: {\n      message: \"Votre document a bien été supprimé de la base de données.\",\n      variant: \"success\",\n      timeout: 2000,\n    },\n    errorNotification: {\n      message: \"Cela n'a pas marché... Essayez de nouveau.\",\n      variant: \"error\",\n      timeout: 2000,\n    },\n  };\n};\n\nexport const uploadFile = (blob, bucketName, name) => {\n  let formData = new FormData();\n\n  // if (Platform.OS === \"web\") {\n  formData.append(\"file\", blob);\n  // } else {\n  //   formData.append(\"file\", new File(file.uri));\n  //   //\n  // }\n\n  name && formData.append(\"name\", name);\n\n  return {\n    type: \"REQUEST_UPLOAD_FILE\",\n    route: `files/${bucketName}`,\n    payload: formData,\n    method: \"POST\",\n    errorNotification: {\n      message: \"Cela n'a pas marché... Essayez de nouveau.\",\n      variant: \"error\",\n      timeout: 2000,\n    },\n  };\n};\n"]},"metadata":{},"sourceType":"module"}