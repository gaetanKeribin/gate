{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/gaetan/Documents/GATE/app/client/src/components/Jobs/JobsListScreen.js\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { connect, useDispatch, useSelector } from \"react-redux\";\nimport \"moment/locale/fr\";\nimport moment from \"moment\";\nimport _ from \"lodash\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { Icon, Button } from \"react-native-elements\";\nimport theme from \"../../Theme.json\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { fetchJobs } from \"../../actions/jobsActions\";\nimport CustomInput from \"../CustomInput\";\n\nvar Item = function Item(_ref) {\n  var item = _ref.item,\n      navigation = _ref.navigation;\n  return React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate(\"Read\", {\n        job: item,\n        id: item._id\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.itemContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    selectable: true,\n    style: {\n      textAlignVertical: \"bottom\",\n      fontWeight: \"bold\",\n      fontSize: 16\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 11\n    }\n  }, item == null ? void 0 : item.jobTitle, \" en \", item == null ? void 0 : item.employmentType), React.createElement(View, {\n    style: {\n      flexDirection: \"row\",\n      alignItems: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  }, React.createElement(Icon, {\n    name: \"briefcase\",\n    size: 20,\n    color: \"grey\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    style: {\n      textAlignVertical: \"bottom\",\n      marginStart: 8\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, item == null ? void 0 : item.organisation)), React.createElement(View, {\n    style: {\n      flexDirection: \"row\",\n      flex: 1,\n      alignItems: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }, React.createElement(Icon, {\n    name: \"map-marker\",\n    size: 20,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    style: {\n      textAlignVertical: \"bottom\",\n      marginStart: 8,\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, _.capitalize(item == null ? void 0 : item.city)), React.createElement(Text, {\n    color: \"grey\",\n    style: {\n      color: \"grey\",\n      fontSize: 10,\n      textAlignVertical: \"bottom\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, _.capitalize(moment(item == null ? void 0 : item.publishedAt).locale(\"fr\").fromNow()))))));\n};\n\nvar JobsListScreen = function JobsListScreen(_ref2) {\n  var _jobs$jobs;\n\n  var navigation = _ref2.navigation;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      refreshing = _useState2[0],\n      setRefreshing = _useState2[1];\n\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state;\n  }),\n      jobs = _useSelector.jobs;\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      search = _useState4[0],\n      setSearch = _useState4[1];\n\n  var searchableKeys = [\"jobTitle\", \"organisation\", \"city\", \"country\"];\n  useEffect(function () {\n    function fetchData() {\n      dispatch(fetchJobs());\n    }\n\n    fetchData();\n  }, []);\n  var onRefresh = useCallback(function () {\n    setRefreshing(true);\n    fetchJobs();\n    setRefreshing(false);\n  }, [refreshing]);\n  var data = jobs == null ? void 0 : (_jobs$jobs = jobs.jobs) == null ? void 0 : _jobs$jobs.filter(function (u) {\n    var a = false;\n    searchableKeys.every(function (sk, i) {\n      if ((\"\" + u[sk]).toLowerCase().search(search.toLowerCase()) > -1) a = true;\n      if (a === true) return false;else return true;\n    });\n    return a;\n  });\n  return React.createElement(View, {\n    style: {\n      flex: 1,\n      flexDirection: \"row\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.searchBarContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, React.createElement(CustomInput, {\n    onChangeText: setSearch,\n    placeholder: \"John, Doe, Paris, KPMG...\",\n    value: search,\n    leftIcon: \"magnify\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  })), jobs.isLoaded ? React.createElement(FlatList, {\n    style: styles.FlatList,\n    data: data,\n    renderItem: function renderItem(_ref3) {\n      var item = _ref3.item;\n      return React.createElement(Item, {\n        item: item,\n        navigation: navigation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 15\n        }\n      });\n    },\n    keyExtractor: function keyExtractor(item) {\n      return item == null ? void 0 : item._id;\n    },\n    refreshControl: React.createElement(RefreshControl, {\n      refreshing: refreshing,\n      onRefresh: onRefresh,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }) : React.createElement(View, {\n    style: {\n      flex: 1,\n      alignContent: \"center\",\n      justifyContent: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  })), React.createElement(Button, {\n    containerStyle: styles.addButton,\n    buttonStyle: {\n      borderRadius: 60\n    },\n    icon: React.createElement(Icon, {\n      name: \"plus\",\n      size: 40,\n      color: \"white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }),\n    onPress: function onPress() {\n      return navigation.navigate(\"Post\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default JobsListScreen;\nvar styles = StyleSheet.create({\n  container: {\n    width: Dimensions.get(\"window\").width < 500 ? Dimensions.get(\"window\").width : 500\n  },\n  searchBarContainer: {\n    padding: 8,\n    backgroundColor: \"white\",\n    borderColor: \"lightgrey\",\n    margin: 12,\n    borderRadius: 4,\n    borderWidth: 1\n  },\n  FlatList: {\n    backgroundColor: \"white\",\n    borderColor: \"lightgrey\",\n    borderWidth: 1,\n    margin: 12,\n    borderRadius: 4\n  },\n  addButton: {\n    shadowColor: \"grey\",\n    shadowOffset: {\n      width: 0,\n      height: 0\n    },\n    shadowOpacity: 0.5,\n    shadowRadius: 12,\n    position: \"absolute\",\n    alignSelf: \"center\",\n    bottom: 20\n  },\n  itemContainer: {\n    paddingTop: 8,\n    paddingHorizontal: 20,\n    marginVertical: 4,\n    marginHorizontal: 0,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.grey4,\n    paddingVertical: 12,\n    flexDirection: \"row\"\n  }\n});","map":{"version":3,"sources":["/home/gaetan/Documents/GATE/app/client/src/components/Jobs/JobsListScreen.js"],"names":["React","useState","useEffect","useCallback","connect","useDispatch","useSelector","moment","_","Icon","Button","theme","TouchableOpacity","fetchJobs","CustomInput","Item","item","navigation","navigate","job","id","_id","styles","itemContainer","flex","textAlignVertical","fontWeight","fontSize","jobTitle","employmentType","flexDirection","alignItems","marginStart","organisation","capitalize","city","color","publishedAt","locale","fromNow","JobsListScreen","refreshing","setRefreshing","dispatch","state","jobs","search","setSearch","searchableKeys","fetchData","onRefresh","data","filter","u","a","every","sk","i","toLowerCase","container","searchBarContainer","isLoaded","FlatList","alignContent","justifyContent","addButton","borderRadius","StyleSheet","create","width","Dimensions","get","padding","backgroundColor","borderColor","margin","borderWidth","shadowColor","shadowOffset","height","shadowOpacity","shadowRadius","position","alignSelf","bottom","paddingTop","paddingHorizontal","marginVertical","marginHorizontal","borderBottomWidth","borderBottomColor","colors","grey4","paddingVertical"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { connect, useDispatch, useSelector } from \"react-redux\";\nimport \"moment/locale/fr\";\nimport moment from \"moment\";\nimport _ from \"lodash\";\nimport {\n  View,\n  FlatList,\n  Text,\n  RefreshControl,\n  ActivityIndicator,\n  StyleSheet,\n  Dimensions,\n} from \"react-native\";\nimport { Icon, Button } from \"react-native-elements\";\nimport theme from \"../../Theme.json\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { fetchJobs } from \"../../actions/jobsActions\";\nimport CustomInput from \"../CustomInput\";\n\nconst Item = ({ item, navigation }) => {\n  return (\n    <TouchableOpacity\n      onPress={() =>\n        navigation.navigate(\"Read\", {\n          job: item,\n          id: item._id,\n        })\n      }\n    >\n      <View style={styles.itemContainer}>\n        <View style={{ flex: 1 }}>\n          <Text\n            selectable\n            style={{\n              textAlignVertical: \"bottom\",\n              fontWeight: \"bold\",\n              fontSize: 16,\n            }}\n          >\n            {item?.jobTitle} en {item?.employmentType}\n          </Text>\n          <View style={{ flexDirection: \"row\", alignItems: \"center\" }}>\n            <Icon name=\"briefcase\" size={20} color=\"grey\" />\n            <Text style={{ textAlignVertical: \"bottom\", marginStart: 8 }}>\n              {item?.organisation}\n            </Text>\n          </View>\n          <View style={{ flexDirection: \"row\", flex: 1, alignItems: \"center\" }}>\n            <Icon name=\"map-marker\" size={20} />\n            <Text\n              style={{ textAlignVertical: \"bottom\", marginStart: 8, flex: 1 }}\n            >\n              {_.capitalize(item?.city)}\n            </Text>\n            <Text\n              color=\"grey\"\n              style={{\n                color: \"grey\",\n                fontSize: 10,\n                textAlignVertical: \"bottom\",\n              }}\n            >\n              {_.capitalize(moment(item?.publishedAt).locale(\"fr\").fromNow())}\n            </Text>\n          </View>\n        </View>\n      </View>\n    </TouchableOpacity>\n  );\n};\n\nconst JobsListScreen = ({ navigation }) => {\n  const [refreshing, setRefreshing] = useState(false);\n  const dispatch = useDispatch();\n  const { jobs } = useSelector((state) => state);\n\n  const [search, setSearch] = useState(\"\");\n  const searchableKeys = [\"jobTitle\", \"organisation\", \"city\", \"country\"];\n\n  useEffect(() => {\n    function fetchData() {\n      dispatch(fetchJobs());\n    }\n    fetchData();\n  }, []);\n\n  const onRefresh = useCallback(() => {\n    setRefreshing(true);\n    fetchJobs();\n    setRefreshing(false);\n  }, [refreshing]);\n\n  const data = jobs?.jobs?.filter((u) => {\n    let a = false;\n    searchableKeys.every((sk, i) => {\n      if (`${u[sk]}`.toLowerCase().search(search.toLowerCase()) > -1) a = true;\n      if (a === true) return false;\n      else return true;\n    });\n    return a;\n  });\n\n  return (\n    <View style={{ flex: 1, flexDirection: \"row\" }}>\n      <View style={{ flex: 1 }} />\n      <View style={styles.container}>\n        <View style={styles.searchBarContainer}>\n          <CustomInput\n            onChangeText={setSearch}\n            placeholder=\"John, Doe, Paris, KPMG...\"\n            value={search}\n            leftIcon=\"magnify\"\n          />\n        </View>\n        {jobs.isLoaded ? (\n          <FlatList\n            style={styles.FlatList}\n            data={data}\n            renderItem={({ item }) => (\n              <Item item={item} navigation={navigation} />\n            )}\n            keyExtractor={(item) => item?._id}\n            refreshControl={\n              <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\n            }\n          />\n        ) : (\n          <View\n            style={{\n              flex: 1,\n              alignContent: \"center\",\n              justifyContent: \"center\",\n            }}\n          >\n            <ActivityIndicator size=\"large\" />\n          </View>\n        )}\n        <Button\n          containerStyle={styles.addButton}\n          buttonStyle={{ borderRadius: 60 }}\n          icon={<Icon name=\"plus\" size={40} color=\"white\" />}\n          onPress={() => navigation.navigate(\"Post\")}\n        />\n      </View>\n      <View style={{ flex: 1 }} />\n    </View>\n  );\n};\n\nexport default JobsListScreen;\n\nconst styles = StyleSheet.create({\n  container: {\n    width:\n      Dimensions.get(\"window\").width < 500\n        ? Dimensions.get(\"window\").width\n        : 500,\n  },\n  searchBarContainer: {\n    padding: 8,\n    backgroundColor: \"white\",\n    borderColor: \"lightgrey\",\n    margin: 12,\n    borderRadius: 4,\n    borderWidth: 1,\n  },\n  FlatList: {\n    backgroundColor: \"white\",\n    borderColor: \"lightgrey\",\n    borderWidth: 1,\n    margin: 12,\n    borderRadius: 4,\n  },\n  addButton: {\n    shadowColor: \"grey\",\n    shadowOffset: { width: 0, height: 0 },\n    shadowOpacity: 0.5,\n    shadowRadius: 12,\n    position: \"absolute\",\n    alignSelf: \"center\",\n    bottom: 20,\n  },\n  itemContainer: {\n    paddingTop: 8,\n    paddingHorizontal: 20,\n    marginVertical: 4,\n    marginHorizontal: 0,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.grey4,\n    paddingVertical: 12,\n    flexDirection: \"row\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}