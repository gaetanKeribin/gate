(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{482:function(e,t,n){"use strict";var a=n(15),r=n.n(a),o=n(19),i=n.n(o),c=n(0),l=n.n(c),s=n(27),u=n(481),m=n(9),d=n(59),p=n(2),g=n(77),f=n(425),E=n(25),b=n.n(E),y=n(10),h=n.n(y);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={isLoggingIn:!1,isLoggingOut:!1,isSigningUp:!1,isLoggedIn:!1,isDeletingAccount:!1,loggedInAt:null,user:null,userInfoUpdatedAt:null,token:null,errors:[]};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x={users:[],isFetching:!1,lastUpdatedAt:null,isLoaded:!1};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R={notification:null,form:null,show:!1,timeout:null};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P={jobs:[],isFetching:!1,lastUpdatedAt:null,isLoaded:!1},A=n(35),k=n.n(A);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I={conversations:[],conversationsIds:[],interlocutorsIds:[],lastUpdatedAt:null,isLoaded:!1,isFetchingConversations:!1,isFetchingConversation:!1},V=function(e,t,n){var a=[];return t>0&&a.concat(e.slice(0,index)),a.concat(D({},e[index],{},n)),a.concat(index+1),a},L=Object(g.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_AUTH_TOKEN":return v({},e,{},t.payload);case"REQUEST_SIGN_UP":case"REQUEST_SIGN_UP":return v({},e,{isSigningUp:!0});case"REQUEST_LOG_IN":return v({},e,{isLoggingIn:!0});case"REQUEST_LOG_OUT":return v({},e,{isloggingOut:!0});case"REQUEST_UPDATE_USER":return v({},e,{isUpdatingUser:!0});case"REQUEST_DELETE_ACCOUNT":return v({},e,{isDeletingAccount:!0});case"REQUEST_UPDATE_PASSWORD":return v({},e,{isUpdatingPassword:!0});case"REQUEST_MY_JOBS":return v({},e,{isFetching:!0});case"REQUEST_UPDATE_JOB":return v({},e,{isUpdatingJob:!0});case"REQUEST_CREATE_JOB":return e;case"RECEIVE_CONVERSATION":return v({},e,{user:v({},e.user,{privateConversations:[].concat(b()(e.user.conversations),[{conversation_id:t.conversation._id,interlocutor_id:t.message.sender}])})});case"PRIVATE_CONVERSATION_ACK":return v({},e,{user:v({},e.user,{privateConversations:[].concat(b()(e.user.conversations),[{conversation_id:t.conversation._id,interlocutor_id:t.message.recipient}])})});case"REQUEST_UPDATE_PASSWORD:SUCCESS":return e;case"REQUEST_DELETE_ACCOUNT:SUCCESS":case"REQUEST_LOG_OUT:SUCCESS":return j;case"REQUEST_VERIFY_TOKEN:SUCCESS":return v({},e,{tokenVerifiedAt:t.receivedAt});case"REQUEST_LOG_IN:SUCCESS":return v({},e,{isLoggingIn:!1,isLoggedIn:!0,loggedInAt:t.receivedAt,userInfoUpdatedAt:t.receivedAt},t.payload);case"REQUEST_SIGN_UP:SUCCESS":return v({},e,{isSigningUp:!1,user:t.user,token:t.token,loggedInAt:t.receivedAt,isLoggedIn:!0,userInfoUpdatedAt:t.receivedAt},t.payload);case"REQUEST_UPDATE_USER:SUCCESS":return v({},e,{isUpdatingUser:!1,userInfoUpdatedAt:t.receivedAt},t.payload);case"REQUEST_MY_JOBS:SUCCESS":return v({},e,{isFetching:!1,lastUpdatedAt:t.receivedAt,isLoaded:!0},t.payload);case"REQUEST_UPDATE_JOB:SUCCESS":return v({},e,{user:v({},e.user,{jobs:t.payload.jobs}),isUpdatingJob:!1});case"REQUEST_CREATE_JOB:SUCCESS":return v({},e,{user:v({},e.user,{jobs:[t.payload.job].concat(b()(e.user.jobs))})});case"REQUEST_DELETE_FILE:SUCCESS":case"REQUEST_UPLOAD_FILE:SUCCESS":return v({},e,{user:t.payload.updatedUser});case"REQUEST_VERIFY_TOKEN:ERROR":return j;case"REQUEST_MY_JOBS:ERROR":case"REQUEST_UPDATE_USER:ERROR":case"REQUEST_UPDATE_PASSWORD:ERROR":case"REQUEST_LOG_IN:ERROR":case"REQUEST_SIGN_UP:ERROR":case"REQUEST_UPDATE_JOB:ERROR":case"REQUEST_CREATE_JOB:ERROR":return v({},e,{errors:[].concat(b()(e.errors),[t])});default:return e}},overlay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_OVERLAY":return w({},t.payload,{show:!0});case"ASK_USER_INPUT":return{form:t.form,show:!0};case"RESET_OVERLAY":return R;default:return e}},jobs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_JOBS":return U({},e,{isFetching:!0});case"REQUEST_JOBS:SUCCESS":return U({},e,{isFetching:!1,lastUpdatedAt:t.receivedAt,isLoaded:!0},t.payload);case"REQUEST_JOBS:ERROR":return U({},e,{isFetching:!1,lastUpdatedAt:t.receivedAt,isLoaded:!0});case"REQUEST_DELETE_JOB":return U({},e,{isDeleting:!0});case"REQUEST_DELETE_JOB:SUCCESS":return U({},e,{isDeleting:!1,lastUpdatedAt:t.receivedAt});case"REQUEST_CREATE_JOB:SUCCESS":return U({},e,{jobs:[t.payload.job].concat(b()(e.jobs))});case"REQUEST_DELETE_JOB:ERROR":return U({},e,{isFetchingConversations:!1});case"REQUEST_LOG_OUT:SUCCESS":return P;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_USERS":return C({},e,{isFetching:!0});case"REQUEST_USERS:SUCCESS":case"REQUEST_USERS:ERROR":return C({},t.payload,{isFetching:!1,lastUpdatedAt:t.receivedAt,isLoaded:!0});case"REQUEST_LOG_OUT:SUCCESS":return x;default:return e}},chat:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,n=arguments.length>1?arguments[1]:void 0,a=k.a.findIndex(t.conversations,{_id:null==(e=n.payload)?void 0:e.conversation_id});switch(n.type){case"REQUEST_CONVERSATIONS:SUCCESS":return D({},t,{lastUpdatedAt:n.receivedAt,conversations:n.payload.conversations,isLoaded:!0});case"REQUEST_CONVERSATION:SUCCESS":return D({},t,{conversations:V(t.conversations,a,n.payload.conversation),lastUpdatedAt:n.receivedAt,isLoaded:!0});case"RECEIVE_READ_ACK":return D({},t,{lastUpdatedAt:n.receivedAt,conversations:V(t.conversations,a,{readAck:n.payload.reacAck}),isLoaded:!0});case"RECEIVE_WRITING_ACK":return D({},t,{lastUpdatedAt:n.receivedAt,conversations:V(t.conversations,a,{writing:n.payload.writing})});case"RECEIVE_NEW_CONVERSATION":return D({},t,{conversations:[n.payload.conversation].concat(b()(t.conversations)),lastUpdatedAt:n.receivedAt});case"RECEIVE_NEW_MESSAGE":return D({},t,{lastUpdatedAt:n.receivedAt,conversations:V(t.conversations,a,{lastMessage:n.message,messages:Array.isArray(t.conversations[a].messages)?[n.message].concat(b()(t.conversations[a].messages)):[n.message]})});case"REQUEST_LOG_OUT:SUCCESS":return I;default:return t}}}),N=n(426),B=n.n(N),M=n(141),Q=n.n(M),H="http://localhost:8080",J=function(e){return{type:"SHOW_OVERLAY",payload:{notification:e.notification,form:e.form,menu:e.menu,timeout:e.timeout,callbacks:e.callbacks,redirect:e.redirect}}};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var G=n(428),F=n(427),Y=n.n(F),K=n(226),q={key:"root",storage:G.a,blacklist:["overlay"]},X=Object(K.a)(q,L),Z=[f.a,function(e){return function(e){return function(t){return console.log(t.type),e(t)}}},function(e){return function(t){return function(n){var a,r,o;return"REQUEST"===(null==(a=n.type)?void 0:a.substring(0,7))&&!1===(null==(r=n.type)?void 0:r.includes(":"))?(o="REQUEST_UPLOAD"===n.type.substring(0,14)?Q.a.create({baseURL:H+"/api/",timeout:3e3,headers:{accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data",Authorization:"Bearer "+e.getState().auth.token}}):Q.a.create({baseURL:H+"/api/",timeout:3e3,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json",Authorization:"Bearer "+e.getState().auth.token}}),new Promise((function(e,t){switch(n.method){case"GET":return e(o.get(n.route));case"POST":return e(o.post(n.route,n.payload));case"DELETE":return e(o.delete(n.route,n.payload));case"PATCH":return e(o.patch(n.route,n.payload));default:return}})).then((function(t){return n.successNotification&&e.dispatch(J({timeout:3e3,redirect:n.successNotification.redirect,callbacks:n.successNotification.callbacks,notification:{variant:"success",message:n.successNotification.message}})),e.dispatch({type:n.type+":SUCCESS",payload:t.data,receivedAt:new Date})})).catch((function(t){var a,r,o,i;(console.log(t),n.errorNotification||!0===(null==(a=t.response)?void 0:a.data.forceReconnect))&&e.dispatch(J({timeout:3e3,redirect:(null==(r=t.response)?void 0:r.data.forceReconnect)&&"Auth",callbacks:(null==(o=t.response)?void 0:o.data.forceReconnect)&&["REQUEST_LOG_OUT:SUCCESS"],notification:{variant:"error",message:(null==(i=t.response)?void 0:i.data.message)||"Cela n'a pas march\xe9..."}}));return e.dispatch({type:n.type+":ERROR",error:t,receivedAt:new Date})})),t(n)):t(n)}}},function(){var e;return function(t){return function(n){return function(a){var r;if(!e&&t.getState().auth.isLoggedIn&&console.log("socket somehow disconnected"),"REQUEST_LOG_IN:SUCCESS"===a.type||"REQUEST_SIGN_UP:SUCCESS"===a.type||"REQUEST_VERIFY_TOKEN:SUCCESS"===a.type){var o=a.payload.token;(e=B()(H,{forceNode:!0,transportOptions:{polling:{extraHeaders:{"Access-Control-Allow-Origin":"*",authorization:o}}}})).on("connected",(function(e){console.log("Socket connected")})),e.on("unauthorized",(function(e){console.log("Socket disconnected")})),e.on("authenticated",(function(e){console.log("Socket authenticated")})),e.on("default",(function(e){t.dispatch(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{receivedAt:new Date}))}))}return"SOCKET"===(null==(r=a.type)?void 0:r.substring(0,6))&&e.emit(a.event,a.payload),"REQUEST_LOG_OUT:SUCCESS"===a.type&&(e.disconnect(),console.log("socket disconnected")),n(a)}}}}()];"web"===m.a.OS&&Z.push(Y.a);var $=Object(g.d)(X,g.a.apply(void 0,Z)),ee=Object(K.b)($),te=n(430),ne=n(421),ae=n(704),re=n(703),oe=n(702),ie=n(16),ce=n(187),le=n(13),se=n(71),ue=n(29),me=n(76),de=c.createRef(),pe=c.createRef();function ge(e,t){de.current&&pe.current&&pe.current.navigate(e,t)}var fe=Object(s.b)((function(e){return{auth:e.auth}}),(function(e){return{logOut:function(){return e({type:"REQUEST_LOG_OUT",route:"/auth/logout",method:"GET",errorNotification:!0,successNotification:{message:"Au revoir !",variant:"success",redirect:"Auth"}})}}}))((function(e){var t=e.navigation,n=e.leftButton,a=e.title,r=e.logOut,o=e.noRightButton,i=Object(c.useContext)(ie.f).theme;return l.a.createElement(p.a,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:"web"===m.a.OS?10:me.a.statusBarHeight,paddingHorizontal:10,paddingBottom:8,backgroundColor:"white",borderBottomColor:"lightgrey",borderBottomWidth:1}},l.a.createElement((function(){switch(n){case"profile":return l.a.createElement(ie.d,{name:"menu",onPress:function(){return t.openDrawer()},color:i.colors.primary});case"back":return l.a.createElement(ie.d,{name:"arrow-left",color:i.colors.primary,onPress:function(){return ge("Main")}});default:return l.a.createElement(ie.d,{name:"menu",onPress:function(){return t.openDrawer()},color:i.colors.primary})}}),null),l.a.createElement((function(){return l.a.createElement(p.a,null,l.a.createElement(le.a,{style:{color:i.colors.primary,fontSize:20,textAlign:"center"}},a))}),null),l.a.createElement((function(){return o?l.a.createElement(p.a,null):l.a.createElement(p.a,{style:{flexDirection:"row"}},l.a.createElement(ie.d,{name:"logout",color:i.colors.grey0,containerStyle:{marginHorizontal:8},onPress:function(){return r()}}))}),null))})),Ee=(n(98),n(14)),be=n.n(Ee),ye=function(e){var t=e.item,n=e.navigation,a=Object(c.useContext)(ie.f).theme;return l.a.createElement(ue.a,{onPress:function(){return n.navigate("Edit",{job:t,id:t._id})}},l.a.createElement(p.a,{style:{paddingTop:8,paddingHorizontal:20,marginVertical:4,marginHorizontal:0,borderBottomWidth:1,borderBottomColor:a.colors.grey4,paddingVertical:12,flexDirection:"row"}},l.a.createElement(p.a,{style:{flex:1}},l.a.createElement(le.a,{style:{textAlignVertical:"bottom",fontWeight:"bold",fontSize:16}},null==t?void 0:t.jobTitle," en ",null==t?void 0:t.employmentType),l.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},l.a.createElement(ie.d,{name:"briefcase",size:20,color:"grey"}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginStart:8}},null==t?void 0:t.organisation)),l.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center",flex:1}},l.a.createElement(ie.d,{name:"map-marker",size:20}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginStart:8,flex:1}},k.a.capitalize(null==t?void 0:t.city)),l.a.createElement(le.a,{color:"grey",style:{color:"grey",fontSize:10,textAlignVertical:"bottom"}},k.a.capitalize(be()(null==t?void 0:t.publishedAt).locale("fr").fromNow()))))))},he=Object(s.b)((function(e){return{jobs:e.jobs,auth:e.auth}}),(function(e){return{fetchMyJobs:function(){return e({type:"REQUEST_MY_JOBS",route:"jobs/me",method:"GET"})}}}))((function(e){var t=e.auth,n=e.navigation,a=e.fetchMyJobs;return Object(c.useEffect)((function(){a()}),[]),l.a.createElement(p.a,{style:{flex:1,backgroundColor:"white"}},l.a.createElement(fe,{title:"Mes offres d'emploi",navigation:n,noRightButton:!0,leftButton:"back"}),l.a.createElement(se.a,{data:null==t?void 0:t.user.jobs,renderItem:function(e){var t=e.item;return l.a.createElement(ye,{item:t,navigation:n})},keyExtractor:function(e){return null==e?void 0:e._id}}))})),Se=n(73),ve=n(43);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Oe=Object(s.b)((function(e){return{jobs:e.jobs,auth:e.auth}}),(function(e){return{updateJob:function(t){return e(function(e){return{type:"REQUEST_UPDATE_JOB",method:"PATCH",route:"jobs/"+e._id,payload:e,successNotification:{message:"Votre offre d'emploi a \xe9t\xe9 mise \xe0 jour.",variant:"success",redirect:"MyJobs",timeout:1e3},errorNotification:{message:"Cela n'a pas march\xe9... Essayez de nouveau.",variant:"error",timeout:2e3}}}(t))},deleteJob:function(t){return e(function(e){return{type:"REQUEST_DELETE_JOB",method:"DELETE",route:"jobs/"+e,successNotification:{message:"Offre d'emploi supprim\xe9e.",variant:"success",redirect:"MyJobs",timeout:1e3},errorNotification:{message:"Cela n'a pas march\xe9... Essayez de nouveau.",variant:"error",timeout:2e3}}}(t))},fetchMyJobs:function(){return e({type:"REQUEST_MY_JOBS",route:"jobs/me",method:"GET"})}}}))((function(e){var t=e.updateJob,n=e.deleteJob,a=e.route,o=e.fetchMyJobs,s=e.navigation,u=Object(c.useState)(!1),m=i()(u,2),d=m[0],g=m[1],f=Object(c.useState)(!1),E=i()(f,2),b=E[0],y=E[1],S=a.params.job,v=Object(c.useContext)(ie.f).theme,j=Object(c.useState)(S.employmentType),O=i()(j,2),C=O[0],x=O[1],T=Object(c.useState)(S.asap),w=i()(T,2),R=w[0],_=w[1],U=Object(c.useState)(S.organisation),P=i()(U,2),A=P[0],k=P[1],z=Object(c.useState)(S.city),D=i()(z,2),I=D[0],V=D[1],L=Object(c.useState)(S.salary),N=i()(L,2),B=N[0],M=N[1],Q=Object(c.useState)(S.jobTitle),H=i()(Q,2),J=H[0],W=H[1],G=Object(c.useState)(S.jobDesc),F=i()(G,2),Y=F[0],K=F[1],q=Object(c.useState)(""+S.minExp),X=i()(q,2),Z=X[0],$=X[1],ee=Object(c.useState)(S.contact),te=i()(ee,2),ne=te[0],ae=te[1],re=Object(c.useState)({}),oe=i()(re,2),ce=oe[0],se=oe[1],ue=function(){return C?A?I?Y?J?Z?(t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},S,{employmentType:C,asap:R,organisation:A,city:I,salary:B,jobDesc:Y,jobTitle:J,minExp:Z,contact:ne})),_(!1),V(),M(),ae(),se({}),x(),k(),K(),void W()):se({minExp:"Ce champs est obligatoire."}):se({jobTitle:"Ce champs est obligatoire."}):se({jobDesc:"Ce champs est obligatoire."}):se({city:"Ce champs est obligatoire."}):se({organisation:"Ce champs est obligatoire."}):se({employmentType:"Ce champs est obligatoire."})};return l.a.createElement(p.a,{style:{flex:1,alignContent:"space-between",paddingVertical:8,paddingHorizontal:8,backgroundColor:"white"}},l.a.createElement(ve.a,null,l.a.createElement(ie.e,{label:"Type de contrat*",placeholder:"CDI, CDD, Apprentissage...",value:C,onChangeText:function(e){return x(e)},errorMessage:ce.employmentType}),l.a.createElement(ie.e,{label:"Organisation*",placeholder:"Deloitte, Engie, EY...",value:A,onChangeText:function(e){return k(e)},errorMessage:ce.organisation}),l.a.createElement(ie.e,{placeholder:"Paris, Shanghai, Lyon...",label:"Ville*",value:I,onChangeText:function(e){return V(e)},errorMessage:ce.city}),l.a.createElement(ie.e,{placeholder:"Auditeur des SI, Pentester junior...",label:"Intitul\xe9 du poste*",value:J,onChangeText:function(e){return W(e)},errorMessage:ce.jobTitle}),l.a.createElement(ie.e,{label:"Description du poste*",multiline:!0,inputStyle:{height:200,textAlignVertical:"top"},placeholder:"Les missions, les comp\xe9tences requises, l'employeur...",value:Y,onChangeText:function(e){return K(e)},errorMessage:ce.jobDesc}),l.a.createElement(ie.e,{label:"Exp\xe9rience*",placeholder:"Ann\xe9es pass\xe9es dans un poste similaire",value:Z,keyboardType:"number-pad",onChangeText:function(e){return $(e)},errorMessage:ce.minExp}),l.a.createElement(ie.e,{label:"R\xe9mun\xe9ration",placeholder:"En \u20ac",keyboardType:"decimal-pad",value:B,onChangeText:function(e){return M(e)},showSoftInputOnFocus:!1,errorMessage:ce.salary}),l.a.createElement(p.a,{style:{marginBottom:12,flexDirection:"row",display:"flex",height:40}},l.a.createElement(le.a,{style:{color:v.colors.grey3,fontWeight:"bold",paddingLeft:10,fontSize:16,flex:1,textAlignVertical:"center"}},"Poste \xe0 pourvoir d\xe8s que possible"),l.a.createElement(Se.a,{trackColor:{false:v.colors.grey4,true:v.colors.primarySoft},thumbColor:R?v.colors.primary:v.colors.grey2,value:R,onValueChange:function(e){return _(e)}})),l.a.createElement(ie.e,{label:"Contact",placeholder:"Email",value:ne,onChangeText:function(e){return ae(e)},errorMessage:ce.contact})),l.a.createElement(p.a,{style:{paddingTop:8}},l.a.createElement(ie.b,{title:"Valider les changements",loading:b,onPress:function(){y(!0),ue(),y(!1),o(),s.navigate("Read")},buttonStyle:{backgroundColor:v.colors.primary}}),l.a.createElement(ie.b,{title:"Supprimer l'offre",loading:d,onPress:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,r.a.awrap(n(S._id));case 3:g(!1),o(),s.navigate("Read");case 6:case"end":return e.stop()}}),null,null,null,Promise)},buttonStyle:{backgroundColor:v.colors.error}})))})),Ce=Object(re.a)(),xe=function(){return l.a.createElement(p.a,{style:{flex:1}},l.a.createElement(Ce.Navigator,{initialRouteName:"Read",headerMode:"screen"},l.a.createElement(Ce.Screen,{name:"Read",component:he,options:{headerShown:!1}}),l.a.createElement(Ce.Screen,{name:"Edit",component:Oe,options:{title:"Modifier"}})))},Te=n(126),we=n(50),Re=n(55),_e=n(38),Ue=function(e){var t=e.item,n=e.navigation;return l.a.createElement(_e.g,{onPress:function(){return n.navigate("Read",{job:t,id:t._id})}},l.a.createElement(p.a,{style:{paddingTop:8,paddingHorizontal:20,marginVertical:4,marginHorizontal:0,borderBottomWidth:1,borderBottomColor:Re.colors.grey4,paddingVertical:12,flexDirection:"row"}},l.a.createElement(p.a,{style:{flex:1}},l.a.createElement(le.a,{style:{textAlignVertical:"bottom",fontWeight:"bold",fontSize:16}},null==t?void 0:t.jobTitle," en ",null==t?void 0:t.employmentType),l.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},l.a.createElement(ie.d,{name:"briefcase",size:20,color:"grey"}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginStart:8}},null==t?void 0:t.organisation)),l.a.createElement(p.a,{style:{flexDirection:"row",flex:1,alignItems:"center"}},l.a.createElement(ie.d,{name:"map-marker",size:20}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginStart:8,flex:1}},k.a.capitalize(null==t?void 0:t.city)),l.a.createElement(le.a,{color:"grey",style:{color:"grey",fontSize:10,textAlignVertical:"bottom"}},k.a.capitalize(be()(null==t?void 0:t.publishedAt).locale("fr").fromNow()))))))},Pe=Object(s.b)((function(e){return{auth:e.auth,jobs:e.jobs}}),(function(e){return{fetchJobs:function(){return e({type:"REQUEST_JOBS",route:"jobs",method:"GET"})}}}))((function(e){var t=e.navigation,n=e.fetchJobs,a=e.jobs,r=Object(c.useState)(!1),o=i()(r,2),s=o[0],u=o[1];Object(c.useEffect)((function(){n()}),[]);var m=Object(c.useCallback)((function(){u(!0),n(),u(!1)}),[s]);return l.a.createElement(p.a,{style:{flex:1}},a.isLoaded?l.a.createElement(se.a,{style:{borderRadius:0,shadowOffset:{width:10,height:10},shadowColor:"black",shadowOpacity:.3,elevation:2,backgroundColor:"white"},data:a.jobs,renderItem:function(e){var n=e.item;return l.a.createElement(Ue,{item:n,navigation:t})},keyExtractor:function(e){return null==e?void 0:e._id},refreshControl:l.a.createElement(Te.a,{refreshing:s,onRefresh:m})}):l.a.createElement(p.a,{style:{flex:1,alignContent:"center",justifyContent:"center"}},l.a.createElement(we.a,{size:"large"})),l.a.createElement(ie.b,{containerStyle:{position:"absolute",bottom:0,left:10},buttonStyle:{borderRadius:50},icon:l.a.createElement(ie.d,{name:"plus",size:30,color:"white"}),onPress:function(){return t.navigate("Post")}}))})),Ae=Object(s.b)((function(e){return{auth:e.auth,jobs:e.jobs}}),(function(e){return{fetchJobs:function(){return e({type:"REQUEST_JOBS",route:"jobs",method:"GET"})}}}))((function(e){var t=e.route.params.job;return l.a.createElement(p.a,{style:{flex:1,alignContent:"space-between",paddingVertical:10,paddingHorizontal:8,backgroundColor:"white"}},l.a.createElement(ve.a,{style:{flex:1,paddingHorizontal:12}},l.a.createElement(p.a,{style:{alignItems:"flex-end"}},l.a.createElement(le.a,{style:{color:"grey",fontSize:12,textAlignVertical:"bottom"}},k.a.capitalize(be()(t.publishedAt).locale("fr").fromNow()))),l.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},l.a.createElement(ie.d,{name:"briefcase",size:25,color:"grey"}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginStart:8,fontSize:20}},t.organisation)),l.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},l.a.createElement(ie.d,{name:"map-marker",size:25,color:Re.colors.grey2}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginStart:8,fontSize:20}},k.a.capitalize(t.city))),l.a.createElement(le.a,{style:{color:Re.colors.grey3,fontWeight:"bold",fontSize:16,marginTop:8}},"Description"),l.a.createElement(le.a,{style:{marginBottom:4,textAlign:"justify",fontSize:16}},t.jobDesc),t.salary&&l.a.createElement(le.a,null,"R\xe9mun\xe9ration \xe0 hauteur de ",t.salary," brut."),t.asap&&l.a.createElement(le.a,{style:{color:Re.colors.primary}},"Poste \xe0 pourvoir d\xe8s que possible."),l.a.createElement(le.a,{style:{color:Re.colors.grey3,fontWeight:"bold",fontSize:16,marginTop:8}},"Contact"),l.a.createElement(le.a,null,t.contact)))})),ke=n(479),ze=n.n(ke),De=function(e){ze()(e);var t=Object(c.useContext)(ie.f).theme,n=Object(s.c)(),a=Object(c.useState)(!1),r=i()(a,2),o=r[0],u=r[1],m=Object(c.useState)({}),d=i()(m,2),g=d[0],f=d[1],E=Object(c.useState)(""),b=i()(E,2),y=b[0],h=b[1],S=Object(c.useState)(!1),v=i()(S,2),j=v[0],O=v[1],C=Object(c.useState)(""),x=i()(C,2),T=x[0],w=x[1],R=Object(c.useState)(""),_=i()(R,2),U=_[0],P=_[1],A=Object(c.useState)(""),k=i()(A,2),z=k[0],D=k[1],I=Object(c.useState)(""),V=i()(I,2),L=V[0],N=V[1],B=Object(c.useState)(),M=i()(B,2),Q=M[0],H=M[1],J=Object(c.useState)(),W=i()(J,2),G=W[0],F=W[1],Y=Object(c.useState)(""),K=i()(Y,2),q=K[0],X=K[1],Z=!!(U&&T&&y&&L&&z&&q);return l.a.createElement(p.a,{style:{flex:1}},l.a.createElement(p.a,{style:{flex:1,backgroundColor:"white"}},l.a.createElement(ve.a,{style:{paddingHorizontal:12,paddingTop:20,paddingBottom:100}},l.a.createElement(ie.e,{label:"Type de contrat*",placeholder:"CDI, CDD, Apprentissage...",value:y,onChangeText:function(e){return h(e)},errorMessage:g.employmentType}),l.a.createElement(ie.e,{label:"Organisation*",placeholder:"Deloitte, Engie, EY...",value:T,onChangeText:function(e){return w(e)},errorMessage:g.organisation}),l.a.createElement(ie.e,{placeholder:"Paris, Shanghai, Lyon...",label:"Ville*",value:U,onChangeText:function(e){return P(e)},errorMessage:g.city}),l.a.createElement(ie.e,{placeholder:"Auditeur des SI, Pentester junior...",label:"Intitul\xe9 du poste*",value:z,onChangeText:function(e){return D(e)},errorMessage:g.jobTitle}),l.a.createElement(ie.e,{label:"Description du poste*",multiline:!0,inputStyle:{height:200,textAlignVertical:"top"},placeholder:"Les missions, les comp\xe9tences requises, l'employeur...",value:L,onChangeText:function(e){return N(e)},errorMessage:g.jobDesc}),l.a.createElement(ie.e,{label:"Exp\xe9rience",placeholder:"Ann\xe9es pass\xe9es dans un poste similaire",value:G,keyboardType:"numeric",onChangeText:function(e){return F(e)},errorMessage:g.minExp}),l.a.createElement(ie.e,{label:"R\xe9mun\xe9ration",placeholder:"En \u20ac",value:Q,onChangeText:function(e){return H(e)},showSoftInputOnFocus:!1,errorMessage:g.salary}),l.a.createElement(p.a,{style:{marginBottom:12,flexDirection:"row",display:"flex",height:40}},l.a.createElement(le.a,{style:{color:t.colors.grey3,fontWeight:"bold",paddingLeft:10,fontSize:16,flex:1,textAlignVertical:"center"}},"Poste \xe0 pourvoir d\xe8s que possible"),l.a.createElement(Se.a,{value:j,onValueChange:function(e){return O(e)}})),l.a.createElement(ie.e,{label:"Contact*",placeholder:"Email",value:q,onChangeText:function(e){return X(e)},errorMessage:g.contact}),l.a.createElement(ie.b,{title:Z?"Poster l'offre d'emploi":"Veuillez remplir tous les champs obligatoires",loading:o,disabled:!Z,buttonStyle:{height:50,marginBottom:12},onPress:function(){return u(!0),n({type:"REQUEST_CREATE_JOB",route:"jobs",payload:{employmentType:y,asap:j,organisation:T,city:U,salary:Q,jobDesc:L,jobTitle:z,minExp:G,contact:q},method:"POST",successNotification:{message:"Votre offre d'emploi a \xe9t\xe9 cr\xe9\xe9e",redirect:"MyJobs"},errorNotification:!0}),u(!1),O(!1),P(),H(),X(),f({}),h(),w(),N(),D(),void u(!1)}}),l.a.createElement(p.a,{style:{height:20}}))))},Ie=Object(re.a)(),Ve=function(e){var t=e.navigation;return l.a.createElement(p.a,{style:{flex:1}},l.a.createElement(fe,{title:"Emplois",navigation:t}),l.a.createElement(Ie.Navigator,{initialRouteName:"List",headerMode:"screen"},l.a.createElement(Ie.Screen,{name:"List",component:Pe,options:{headerShown:!1}}),l.a.createElement(Ie.Screen,{name:"Read",component:Ae,options:function(e){var t=e.route;return{title:t.params.job.jobTitle+" - "+t.params.job.employmentType,headerStatusBarHeight:0}}}),l.a.createElement(Ie.Screen,{name:"Post",component:De,options:{title:"Poster une offre d'emploi",headerStatusBarHeight:0}})))},Le=n(227),Ne=function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],a=atob(t[1]),r=a.length,o=new Uint8Array(r);r--;)o[r]=a.charCodeAt(r);return new Blob([o],{type:n})},Be=function(e,t,n){var a=new FormData;return a.append("file",e),n&&a.append("name",n),{type:"REQUEST_UPLOAD_FILE",route:"files/"+t,payload:a,method:"POST",errorNotification:{message:"Cela n'a pas march\xe9... Essayez de nouveau.",variant:"error",timeout:2e3}}},Me=n(705),Qe=function(e){var t=e.navigation,n=Object(c.useState)(!1),a=i()(n,2),o=a[0],u=a[1],d=Object(c.useContext)(ie.f).theme,g=Object(s.d)((function(e){return e.auth})).user,f=Object(s.c)();return l.a.createElement(p.a,{style:{flex:1}},l.a.createElement(fe,{navigation:t,title:"Mon profil",leftButton:"back",noRightButton:!0}),g?l.a.createElement(p.a,{style:{flex:1,alignContent:"space-between",backgroundColor:"white"}},l.a.createElement(ve.a,{style:{paddingTop:40,flex:1,paddingHorizontal:12}},l.a.createElement(Me.a,{colors:[d.colors.primary,d.colors.secondary],start:[.25,1],end:[0,0],style:{flexDirection:"row",marginBottom:20,paddingVertical:8,paddingHorizontal:16,borderRadius:5}},l.a.createElement(p.a,{style:{flex:1,alignContent:"center",justifyContent:"center"}},l.a.createElement(le.a,{style:{fontSize:20,color:d.colors.grey5}},k.a.capitalize(g.firstname)),l.a.createElement(le.a,{style:{fontSize:30,color:"white",fontWeight:"bold"}},k.a.capitalize(g.lastname)),g.professor&&l.a.createElement(le.a,{style:{color:d.colors.grey4,paddingLeft:4}},"Professeur"),g.administration&&l.a.createElement(le.a,{style:{color:d.colors.grey4,paddingLeft:4}},"Membre du corps administratif")),g.avatar?l.a.createElement(ie.a,{size:"xlarge",containerStyle:{borderColor:"white",borderWidth:3},source:{uri:H+"/api/files/avatars/"+g.avatar},onPress:function(){return u(!o)}}):l.a.createElement(ie.a,{size:"xlarge",containerStyle:{borderColor:"white",borderWidth:3},title:g.firstname.charAt(0).concat(g.lastname.charAt(0)).toUpperCase(),onPress:function(){return u(!o)}}),l.a.createElement(p.a,{style:{marginLeft:-40,justifyContent:"space-between"}},l.a.createElement(ie.b,{icon:l.a.createElement(ie.d,{name:"pencil",color:d.colors.secondary}),onPress:function(){return function(){var e,t,n,a;r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.a.awrap(Le.b());case 2:return o.next=4,r.a.awrap(Le.a({allowsEditing:!0}));case 4:if(!(e=o.sent).cancelled){o.next=7;break}return o.abrupt("return");case 7:if("web"!==m.a.OS){o.next=13;break}t=Ne(e.uri),console.log("selectPicture -> blob",t),f(Be(t,"avatars")),o.next=22;break;case 13:return o.next=15,r.a.awrap(fetch(e.uri));case 15:return n=o.sent,console.log("selectPicture -> res",n),o.next=19,r.a.awrap(n.blob());case 19:a=o.sent,console.log("selectPicture -> blob",a),f(Be(a,"avatars"));case 22:case"end":return o.stop()}}),null,null,null,Promise)}(),void u(!1)},buttonStyle:{elevation:10,backgroundColor:d.colors.primaryLight,width:40,height:40,borderRadius:40}}),g.avatar&&l.a.createElement(ie.b,{icon:l.a.createElement(ie.d,{name:"delete",color:d.colors.grey4}),buttonStyle:{backgroundColor:d.colors.grey0,width:40,height:40,borderRadius:40},onPress:function(){return f((e="avatars",t=g.avatar,{type:"REQUEST_DELETE_FILE",route:"files/"+e+"/"+t,method:"DELETE",successNotification:{message:"Votre document a bien \xe9t\xe9 supprim\xe9 de la base de donn\xe9es.",variant:"success",timeout:2e3},errorNotification:{message:"Cela n'a pas march\xe9... Essayez de nouveau.",variant:"error",timeout:2e3}}));var e,t}}))),l.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},l.a.createElement(ie.d,{name:"briefcase",size:20,color:"grey"}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginHorizontal:8,flex:1}},g.jobTitle," chez ",g.organisation)),l.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},l.a.createElement(ie.d,{name:"school",size:20,color:"grey"}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginHorizontal:8,flex:1}},"Promotion ",g.promo)),l.a.createElement(ie.c,{style:{marginVertical:20,backgroundColor:"grey",borderWidth:1,width:20}}),l.a.createElement(p.a,{style:{flexDirection:"row"}},l.a.createElement(le.a,{style:{textAlign:"justify",flex:1,marginEnd:8}},g.description)),l.a.createElement(ie.c,{style:{marginVertical:20,backgroundColor:"grey",borderWidth:1,width:20}}),l.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},l.a.createElement(ie.d,{name:"at",size:20,color:"grey"}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginStart:8,flex:1}},g.email))),l.a.createElement(p.a,{style:{paddingHorizontal:20}},l.a.createElement(ie.b,{title:"Editer",onPress:function(){return t.navigate("Edit")}}))):l.a.createElement(p.a,{style:{flex:1,alignContent:"center",justifyContent:"center"}},l.a.createElement(we.a,{size:"large"})))};function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Je=Object(s.b)((function(e){return{auth:e.auth}}),(function(e){return{updateUser:function(t){return e(function(e){return{type:"REQUEST_UPDATE_USER",method:"PATCH",route:"auth",payload:e,successNotification:{message:"Vos informations ont \xe9t\xe9 mises \xe0 jour.",variant:"success",redirect:"Read"},errorNotification:!0}}(t))},deleteAccount:function(t){return e({type:"REQUEST_DELETE_ACCOUNT",method:"DELETE",route:"auth",successNotification:{message:"Votre compte a bien \xe9t\xe9 supprim\xe9.",redirect:"Auth"},errorNotification:!0})},updateUserPassword:function(t,n){return e(function(e,t){return{type:"REQUEST_UPDATE_USER",method:"PATCH",route:"auth/password",payload:{password:e,newPassword:t},successNotification:{message:"Votre mot de passe \xe0 \xe9t\xe9 mis \xe0 jour.",variant:"success",redirect:"Read"},errorNotification:!0}}(t,n))}}}))((function(e){var t=e.updateUser,n=e.deleteAccount,a=e.auth,r=e.updateUserPassword,o=Object(c.useContext)(ie.f).theme,s=Object(c.useState)(null==a?void 0:a.user.description),u=i()(s,2),m=u[0],d=u[1],g=Object(c.useState)(null==a?void 0:a.user.email),f=i()(g,2),E=f[0],b=f[1],y=Object(c.useState)(null==a?void 0:a.user.jobTitle),S=i()(y,2),v=S[0],j=S[1],O=Object(c.useState)(null==a?void 0:a.user.organisation),C=i()(O,2),x=C[0],T=C[1],w=Object(c.useState)(""+((null==a?void 0:a.user.promo)||"")),R=i()(w,2),_=R[0],U=R[1],P=Object(c.useState)(null==a?void 0:a.user.alumni),A=i()(P,2),k=A[0],z=A[1],D=Object(c.useState)(null==a?void 0:a.user.professor),I=i()(D,2),V=I[0],L=I[1],N=Object(c.useState)(null==a?void 0:a.user.administration),B=i()(N,2),M=B[0],Q=B[1],H=Object(c.useState)(""),J=i()(H,2),W=J[0],G=J[1],F=Object(c.useState)(""),Y=i()(F,2),K=Y[0],q=Y[1],X=Object(c.useState)(""),Z=i()(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)(""),ne=i()(te,2),ae=ne[0],re=ne[1],oe=Object(c.useState)(!1),ce=i()(oe,2),se=ce[0],me=ce[1],de=Object(c.useState)(!1),pe=i()(de,2),ge=pe[0],fe=pe[1],Ee=Object(c.useState)(!1),be=i()(Ee,2),ye=be[0],he=be[1],je=function(){t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},null==a?void 0:a.user,{description:m,email:E,jobTitle:v,organisation:x,promo:_,alumni:k,professor:V,administration:M}))};return l.a.createElement(p.a,{style:{flex:1,alignContent:"space-between",paddingVertical:8,paddingHorizontal:8,backgroundColor:"white"}},l.a.createElement(ve.a,null,l.a.createElement(p.a,{style:{borderBottomColor:o.colors.grey4,borderBottomWidth:1}},l.a.createElement(ue.a,{style:{paddingVertical:12,paddingHorizontal:12,flexDirection:"row",justifyContent:"space-between",alignContent:"center"},onPress:function(){return he(!ye)}},l.a.createElement(le.a,{style:{fontSize:16}},"Editer mes informations"),l.a.createElement(ie.d,{name:ye?"chevron-up":"chevron-down"})),ye&&l.a.createElement(p.a,{style:{marginBottom:12}},l.a.createElement(p.a,{style:{marginBottom:12,flexDirection:"row",display:"flex",height:40}},l.a.createElement(le.a,{style:{color:o.colors.grey3,fontWeight:"bold",paddingLeft:10,fontSize:16,flex:1,textAlignVertical:"center"}},"Diplom\xe9"),l.a.createElement(Se.a,{value:k,onValueChange:function(e){return z(e)}})),k&&l.a.createElement(ie.e,{label:"Promotion",value:_,onChangeText:function(e){return U(e)},leftIcon:l.a.createElement(ie.d,{name:"school"})}),l.a.createElement(p.a,{style:{marginBottom:12,flexDirection:"row",display:"flex",height:40}},l.a.createElement(le.a,{style:{color:o.colors.grey3,fontWeight:"bold",paddingLeft:10,fontSize:16,flex:1,textAlignVertical:"center"}},"Membre du corps professoral"),l.a.createElement(Se.a,{value:V,onValueChange:function(e){return L(e)}})),l.a.createElement(p.a,{style:{marginBottom:12,flexDirection:"row",display:"flex",height:40}},l.a.createElement(le.a,{style:{color:o.colors.grey3,fontWeight:"bold",paddingLeft:10,fontSize:16,flex:1,textAlignVertical:"center"}},"Membre du corps administratif"),l.a.createElement(Se.a,{value:M,onValueChange:function(e){return Q(e)}})),l.a.createElement(ie.e,{value:x,label:"Organisation",onChangeText:function(e){return T(e)},leftIcon:l.a.createElement(ie.d,{name:"domain"})}),l.a.createElement(ie.e,{value:v,onChangeText:function(e){return j(e)},label:"Profession",leftIcon:l.a.createElement(ie.d,{name:"briefcase"})}),l.a.createElement(ie.e,{label:"Description",value:m,multiline:!0,numberOfLines:8,onChangeText:function(e){return d(e)}}),l.a.createElement(ie.e,{label:"email",value:E,leftIcon:l.a.createElement(ie.d,{name:"email"}),onChangeText:function(e){return b(e)}}),l.a.createElement(ie.b,{title:"Valider les changements",onPress:function(){return je()},buttonStyle:{backgroundColor:o.colors.primary}}))),l.a.createElement(p.a,{style:{borderBottomColor:o.colors.grey4,borderBottomWidth:1}},l.a.createElement(ue.a,{style:{paddingVertical:12,paddingHorizontal:12,flexDirection:"row",justifyContent:"space-between"},onPress:function(){return me(!se)}},l.a.createElement(le.a,{style:{fontSize:16}},"Changer mon mot de passe"),l.a.createElement(ie.d,{name:se?"chevron-up":"chevron-down"})),se&&l.a.createElement(p.a,{style:{marginBottom:12}},l.a.createElement(ie.e,{placeholder:"Mot de passe",leftIcon:l.a.createElement(ie.d,{name:"lock"}),label:"Ancien mot de passe",secureTextEntry:!0,value:W,leftIconContainerStyle:{marginRight:12},containerStyle:{marginBottom:20,marginTop:8},onChangeText:function(e){return G(e)}}),l.a.createElement(ie.e,{placeholder:"Mot de passe",leftIcon:l.a.createElement(ie.d,{name:"lock"}),label:"Nouveau mot de passe",secureTextEntry:!0,value:ae,leftIconContainerStyle:{marginRight:12},containerStyle:{marginBottom:20,marginTop:8},onChangeText:function(e){ee(""),re(e)},errorMessage:$}),l.a.createElement(ie.e,{placeholder:"Mot de passe",leftIcon:l.a.createElement(ie.d,{name:K===ae?"check":"close",color:K===ae?"green":"red"}),label:"Confirmation",secureTextEntry:!0,value:K,leftIconContainerStyle:{marginRight:12},containerStyle:{marginBottom:40,marginTop:8},onChangeText:function(e){return q(e)}}),l.a.createElement(ie.b,{title:"Valider",onPress:function(){return ae.length<8?ee("Choisissez un mot de passe d'au moins 8 caract\xe8res."):ae!==K?ee("Les mots de passe ne correspondent pas."):void r(W,ae)},buttonStyle:{backgroundColor:o.colors.primary},loading:a.isUpdatingPassword}))),l.a.createElement(p.a,null,l.a.createElement(ue.a,{style:{paddingVertical:12,paddingHorizontal:12,flexDirection:"row",justifyContent:"space-between"},onPress:function(){return fe(!ge)}},l.a.createElement(le.a,{style:{fontSize:16}},"Supprimer mon compte"),l.a.createElement(ie.d,{name:ge?"chevron-up":"chevron-down"})),ge&&l.a.createElement(p.a,{style:{marginBottom:12}},l.a.createElement(ie.e,{placeholder:"Mot de passe",leftIcon:l.a.createElement(ie.d,{name:"lock"}),label:"Mot de passe",secureTextEntry:!0,value:W,leftIconContainerStyle:{marginRight:12},containerStyle:{marginBottom:20,marginTop:8},onChangeText:function(e){return G(e)}}),l.a.createElement(ie.b,{title:"Valider",disabled:!W,onPress:function(e){return n(e)},buttonStyle:{backgroundColor:o.colors.error}})))))})),We=Object(re.a)(),Ge=function(){return l.a.createElement(p.a,{style:{flex:1}},l.a.createElement(We.Navigator,{initialRouteName:"Lobby",headerMode:"screen"},l.a.createElement(We.Screen,{name:"Read",component:Qe,options:{headerShown:!1}}),l.a.createElement(We.Screen,{name:"Edit",component:Je,options:{title:"Modifier mon compte"}})))},Fe=n(34),Ye=n(49),Ke=n(3),qe=function(e){var t=e.value,n=e.placeholder,a=e.onChangeText,o=e.searchBar,u=e.select,m=e.clear,d=e.leftIcon,g=e.label,f=e.accept,E=e.date,b=e.secureTextEntry,y=void 0!==b&&b,h=(Object(c.useContext)(ie.f).theme,Object(s.c)()),S=Object(c.useState)(!1),v=i()(S,2),j=(v[0],v[1]);E&&t&&(t=be()(t).format("Do MMMM YYYY"));var O=function(e){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:f&&!(null==f?void 0:f.includes(t))?j(!0):j(!1),a(e);case 2:case"end":return n.stop()}}),null,null,null,Promise)};return l.a.createElement(p.a,{style:[Xe.root]},l.a.createElement(p.a,{style:Xe.content},l.a.createElement(p.a,{style:Xe.labelContainer},l.a.createElement(le.a,{style:Xe.label},g)),l.a.createElement(p.a,{style:Xe.inputContainer},d&&l.a.createElement(ie.d,{name:d,containerStyle:Xe.iconContainer}),o||u||E?l.a.createElement(_e.g,{containerStyle:[Xe.TextInput,{height:60}],style:[Xe.TextInput,{alignItems:"flex-start",justifyContent:"center"}],onPress:function(){if(E)return h(J({dateInput:{onChangeText:a}}));h(J({searchBar:{initialValue:t,searchFor:o,selectFrom:u,onPressSuggestion:a,placeholder:n}}))}},l.a.createElement(le.a,{style:{color:t?"black":"grey"}},t||n)):l.a.createElement(Ye.a,{style:Xe.TextInput,value:t,placeholder:n,placeholderTextColor:"grey",onChangeText:function(e){O(e)},secureTextEntry:y}),u&&l.a.createElement(ie.d,{name:"chevron-down",containerStyle:Xe.iconContainer,size:25,onPress:function(){return h(J({searchBar:{initialValue:t,searchFor:o,selectFrom:u,onPressSuggestion:a,placeholder:n}}))}}),(o||m)&&l.a.createElement(ie.d,{name:"close",containerStyle:Xe.iconContainer,size:20,onPress:function(){return a("")}}))))},Xe=Ke.a.create({root:{marginBottom:12,flexDirection:"row",alignSelf:"stretch"},iconContainer:{marginHorizontal:4},content:{flex:1,width:300},labelContainer:{marginBottom:4},sides:{flex:1,backgroundColor:"blue"},label:{color:"darkgrey"},inputContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:4,borderWidth:1,borderColor:"grey",height:40,backgroundColor:"rgba(250,250,250,1)"},TextInput:{paddingHorizontal:4,flex:1}}),Ze=function(e){var t=e.item,n=e.navigation;return t?l.a.createElement(ue.a,{onPress:function(){n.navigate("Read",{id:t._id,item:t})}},l.a.createElement(p.a,{style:{paddingHorizontal:20,borderBottomWidth:1,borderBottomColor:Re.colors.grey4,paddingVertical:16,flexDirection:"row"}},l.a.createElement(p.a,{style:{alignContent:"center",justifyContent:"center",alignItems:"center",marginRight:12}},t.avatar?l.a.createElement(ie.a,{source:{uri:H+"/api/files/avatars/"+t.avatar},size:"medium"}):l.a.createElement(ie.a,{size:"medium",title:t.firstname[0].concat(t.lastname[0]).toUpperCase()})),l.a.createElement(p.a,null,l.a.createElement(le.a,{style:{textAlignVertical:"bottom",fontWeight:"bold",fontSize:16}},k.a.capitalize(t.firstname)," ",k.a.capitalize(t.lastname)),t.jobTitle&&l.a.createElement(p.a,{style:{flexDirection:"row",flex:1,alignItems:"center"}},l.a.createElement(ie.d,{name:"account-card-details",size:20}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginStart:8}},t.jobTitle," - ",t.organisation)),t.promo&&l.a.createElement(p.a,{style:{flexDirection:"row",flex:1,alignItems:"center"}},l.a.createElement(ie.d,{name:"school",size:20}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginStart:8}},"SIEE promotion ",t.promo))))):null},$e=function(e){var t,n=e.navigation,a=Object(s.c)(),r=Object(s.d)((function(e){return e})).users;Object(c.useEffect)((function(){a({type:"REQUEST_USERS",method:"GET",route:"users"})}),[]);var o=Object(c.useState)(""),u=i()(o,2),m=u[0],d=u[1],g=["firstname","lastname","organisation","city","country","jobTitle","promo"],f=null==r||null==(t=r.users)?void 0:t.filter((function(e){var t=!1;return g.every((function(n,a){return(""+e[n]).toLowerCase().search(m.toLowerCase())>-1&&(t=!0),!0!==t})),t}));return l.a.createElement(p.a,{style:{flex:1,flexDirection:"row"}},l.a.createElement(p.a,{style:{flex:1}}),l.a.createElement(p.a,{style:{width:Fe.a.get("window").width<500?Fe.a.get("window").width:500}},l.a.createElement(p.a,{style:{padding:8,backgroundColor:"white",borderColor:"lightgrey",margin:12,borderRadius:4,borderWidth:1}},l.a.createElement(qe,{onChangeText:d,placeholder:"John, Doe, Paris, KPMG...",value:m,leftIcon:"magnify"})),Object(s.d)((function(e){return e.users.isLoaded}))?l.a.createElement(se.a,{style:{backgroundColor:"white",borderColor:"lightgrey",borderWidth:1,margin:12,borderRadius:4},data:f,renderItem:function(e){var t=e.item;return l.a.createElement(Ze,{item:t,navigation:n})},keyExtractor:function(e){return e._id}}):l.a.createElement(p.a,{style:{flex:1,alignContent:"center",justifyContent:"center"}},l.a.createElement(we.a,{size:"large"}))),l.a.createElement(p.a,{style:{flex:1}}))};function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nt=function(e){return{type:"SOCKET",event:"new-conversation",payload:tt({},e,{sentAt:new Date})}},at=function(e){var t=e.route,n=e.navigation,a=Object(s.d)((function(e){return e})).auth,r=Object(s.c)(),o=t.params.item,i=k.a.capitalize(o.firstname)+" "+k.a.capitalize(o.lastname);return o?l.a.createElement(p.a,{style:{flex:1,alignContent:"space-between",paddingVertical:10,paddingHorizontal:8}},l.a.createElement(ve.a,{style:{flex:1}},l.a.createElement(Me.a,{colors:[Re.colors.primary,Re.colors.secondary],start:[.25,1],end:[0,0],style:{flexDirection:"row",marginBottom:20,paddingVertical:8,paddingHorizontal:16,borderRadius:5}},l.a.createElement(p.a,{style:{flex:1,alignContent:"center",justifyContent:"center"}},l.a.createElement(le.a,{style:{fontSize:20,color:Re.colors.grey5}},k.a.capitalize(o.firstname)),l.a.createElement(le.a,{style:{fontSize:30,color:"white",fontWeight:"bold"}},k.a.capitalize(o.lastname)),o.professor&&l.a.createElement(le.a,{style:{color:Re.colors.grey4,paddingLeft:4}},"Professeur"),o.administration&&l.a.createElement(le.a,{style:{color:Re.colors.grey4,paddingLeft:4}},"Membre du corps administratif")),o.avatar?l.a.createElement(ie.a,{size:"xlarge",containerStyle:{borderColor:"white",borderWidth:3},source:{uri:H+"/api/files/avatars/"+o.avatar}}):l.a.createElement(ie.a,{size:"xlarge",containerStyle:{borderColor:"white",borderWidth:3},title:o.firstname.charAt(0).concat(o.lastname.charAt(0)).toUpperCase()})),l.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},l.a.createElement(ie.d,{name:"briefcase",size:20,color:"grey"}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginHorizontal:8,flex:1}},o.jobTitle," chez ",o.organisation)),l.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},l.a.createElement(ie.d,{name:"school",size:20,color:"grey"}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginHorizontal:8,flex:1}},"Promotion ",o.promo)),l.a.createElement(ie.c,{style:{marginVertical:20,backgroundColor:"grey",borderWidth:1,width:20}}),l.a.createElement(p.a,{style:{flexDirection:"row"}},l.a.createElement(le.a,{style:{textAlign:"justify",flex:1,marginEnd:8}},o.description)),l.a.createElement(ie.c,{style:{marginVertical:20,backgroundColor:"grey",borderWidth:1,width:20}}),l.a.createElement(p.a,{style:{flexDirection:"row"}},l.a.createElement(ie.d,{name:"at",size:20,color:"grey"}),l.a.createElement(le.a,{style:{textAlignVertical:"bottom",marginStart:8,flex:1}},o.email))),o._id!==a.user._id&&l.a.createElement(p.a,null,l.a.createElement(ie.b,{title:"Contacter",onPress:function(){var e=null==a?void 0:a.user.conversations.filter((function(e){return e.interlocutor_id==o._id}));e.length>0?n.navigate("Messages",{screen:"Room",params:{title:i,conversation_id:e[0].conversation_id}}):r(J({form:{action:nt,inputName:"text",actionParams:{recipient:o._id},message:"Demarrer une conversation avec "+k.a.capitalize(o.firstname)+" "+k.a.capitalize(o.lastname)},redirect:"Messages"}))}}))):null},rt=Object(re.a)(),ot=function(e){var t=e.navigation;return l.a.createElement(p.a,{style:{flex:1}},l.a.createElement(fe,{title:"Annuaire",navigation:t}),l.a.createElement(rt.Navigator,{initialRouteName:"List",headerMode:"screen"},l.a.createElement(rt.Screen,{name:"List",component:$e,options:{headerShown:!1}}),l.a.createElement(rt.Screen,{name:"Read",component:at,options:{headerStatusBarHeight:0,title:"",headerStyle:{height:40}}})))},it=function(e){var t,n,a,r,o,i=e.item,c=e.navigation,s=e.auth,u=function(){var e,t,n,a,r;return k.a.remove(i.participants,(function(e){return e._id===(null==s?void 0:s.user._id)})),(null==(e=i.participants)?void 0:e.length)>1?(null==(n=i.participants)?void 0:n.map((function(e){return k.a.capitalize(e.firstname)}))).toString().replace(",",", "):1===(null==(t=i.participants)?void 0:t.length)?k.a.capitalize(null==(a=i.participants[0])?void 0:a.firstname).concat(" ",k.a.capitalize(null==(r=i.participants[0])?void 0:r.lastname)):"Compte supprim\xe9"}(),m=(null==(t=i.lastMessage)?void 0:t.sender)!==(null==s?void 0:s.user._id);return i?l.a.createElement(ue.a,{onPress:function(){return c.navigate("Room",{title:u,conversation_id:i._id})}},l.a.createElement(p.a,{style:{paddingHorizontal:8,paddingVertical:8,borderBottomColor:"white",borderBottomWidth:3,backgroundColor:"white"}},l.a.createElement(p.a,{style:{flexDirection:"row"}},l.a.createElement(p.a,{style:{alignContent:"center",justifyContent:"center",paddingRight:8}},(null==(n=i.participants[0])?void 0:n.avatar)?l.a.createElement(ie.a,{source:{uri:H+"/api/files/avatars/"+(null==(a=i.participants[0])?void 0:a.avatar)},size:"medium"}):l.a.createElement(ie.a,{size:"medium",title:null==(r=i.participants[0])?void 0:r.firstname[0].concat(null==(o=i.participants[0])?void 0:o.lastname[0]).toUpperCase()})),l.a.createElement(p.a,{style:{flex:1,justifyContent:"flex-start"}},l.a.createElement(p.a,{style:{flexDirection:"row",justifyContent:"space-between"}},l.a.createElement(le.a,{style:{textAlignVertical:"bottom",fontSize:16,fontWeight:"bold"}},u),l.a.createElement(le.a,{color:"grey",style:{color:"grey",fontSize:10,textAlignVertical:"bottom"}},k.a.capitalize(be()(i.messages[0].sentAt).locale("fr").fromNow()))),l.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center"}},l.a.createElement(le.a,{style:{textAlignVertical:"center",fontSize:14,flex:1,fontWeight:i.messages[0]&&m?100:800}},i.messages[0].sender===(null==s?void 0:s.user._id)&&"Vous: ",i.messages[0].text,i.readAck.message_id===messages[0]._id&&!m&&"Lu il y a "+be()(i.readAck.timestamp).locale("fr").fromNow())))))):null},ct=function(e){var t=e.navigation,n=Object(c.useState)(!1),a=i()(n,2),r=a[0],o=a[1],u=Object(c.useContext)(ie.f).theme,m=Object(s.c)(),d=Object(s.d)((function(e){return e})),g=d.chat,f=d.auth;Object(c.useEffect)((function(){m({type:"REQUEST_CONVERSATIONS",method:"GET",route:"conversations"})}),[]);var E=Object(c.useCallback)((function(){o(!0),m({type:"REQUEST_CONVERSATIONS",method:"GET",route:"conversations"}),o(!1)}),[r]);return l.a.createElement(p.a,{style:{flex:1}},g.isLoaded?g.conversations.length>0?l.a.createElement(se.a,{data:g.conversations,renderItem:function(e){var n=e.item;return l.a.createElement(it,{item:n,auth:f,navigation:t,theme:u,dispatch:m})},keyExtractor:function(e){return e._id},refreshControl:l.a.createElement(Te.a,{refreshing:r,onRefresh:E})}):l.a.createElement(p.a,{style:{flex:1,alignContent:"center",justifyContent:"center"}},l.a.createElement(le.a,{style:{textAlign:"center",color:u.colors.grey3}},"Aucune conversation"),l.a.createElement(ie.b,{title:"Rafraichir",type:"clear",onPress:function(){return m({type:"REQUEST_CONVERSATIONS",method:"GET",route:"conversations"})}})):l.a.createElement(p.a,{style:{flex:1,alignContent:"center",justifyContent:"center"}},l.a.createElement(we.a,{size:"large"})))},lt=function(e){var t=e.message,n=e.incoming,a=e.theme,r=(e.i,e.readAck);return l.a.createElement(p.a,{style:{flexDirection:"row"}},!n&&l.a.createElement(p.a,{style:{flex:1}}),l.a.createElement(p.a,{style:{backgroundColor:n?"white":a.colors.primary,borderTopLeftRadius:n?0:10,borderTopRightRadius:10,borderBottomLeftRadius:10,borderBottomRightRadius:n?10:0,maxWidth:"80%",paddingHorizontal:8,paddingVertical:8,marginBottom:8,marginHorizontal:8}},l.a.createElement(le.a,{selectable:!0,style:{color:n?"black":"white",textAlign:n?"left":"right"}},t.text),r.message_id===item._id&&l.a.createElement(le.a,null,"Lu il y a ",be()(r.timestamp).locale("fr").fromNow())),n&&l.a.createElement(p.a,{style:{flex:1}}))},st=function(e){var t=e.route.params.conversation_id,n=Object(c.useState)(""),a=i()(n,2),r=a[0],o=a[1],u=Object(c.useContext)(ie.f).theme,m=Object(s.d)((function(e){return e.auth})).user,d=Object(s.d)((function(e){return e.chat.conversations.filter((function(e){return e._id===t}))[0]})),g=Object(s.c)();Object(c.useEffect)((function(){g(function(e){return{type:"REQUEST_CONVERSATION",method:"GET",route:"conversations/single/"+e}}(t)),!1===d.lastMessage.read&&g(function(e){return{type:"SOCKET",event:"read-ack",payload:{conversation_id:e,sentAt:new Date}}}(t))}),[]);var f=function(){var e=null==d?void 0:d.participants.filter((function(e){return e._id!=m._id}));g({type:"SOCKET",event:"private-message",payload:tt({},{text:r,conversation_id:t,recipient:e[0]},{sentAt:new Date})}),o("")};return l.a.createElement(p.a,{style:{flex:1,justifyContent:"space-between"}},(null==d?void 0:d.messages)?l.a.createElement(se.a,{data:d.messages,renderItem:function(e,t){var n=e.item;return l.a.createElement(lt,{i:t,message:n,incoming:(null==n?void 0:n.sender)!==m._id,theme:u,readAck:d.readAck})},keyExtractor:function(e){return null==e?void 0:e._id},inverted:!0}):l.a.createElement(we.a,null),l.a.createElement(p.a,null,d.read&&d.lastMessage.sender!==m._id&&l.a.createElement(le.a,{style:{flex:1,textAlign:"right"}},"Vu \xe0 ",d.read.sentAt),l.a.createElement(p.a,{style:{flexDirection:"row",backgroundColor:"white",paddingVertical:8,paddingHorizontal:16,alignItems:"center",justifyContent:"center",alignContent:"center"}},l.a.createElement(Ye.a,{style:{height:40,flex:1},onChangeText:function(e){return o(e)},value:r,multiline:!0,placeholder:"Ecrivez votre message ici."}),l.a.createElement(ie.b,{icon:l.a.createElement(ie.d,{name:"send",size:20,color:r?u.colors.primary:u.colors.grey2}),disabled:!r,type:"clear",onPress:function(){return f()}}))))},ut=Object(re.a)(),mt=function(e){var t=e.navigation;return l.a.createElement(p.a,{style:{flex:1}},l.a.createElement(fe,{title:"Messagerie",navigation:t}),l.a.createElement(ut.Navigator,{initialRouteName:"Lobby",headerMode:"screen"},l.a.createElement(ut.Screen,{name:"Lobby",component:ct,options:{headerShown:!1}}),l.a.createElement(ut.Screen,{name:"Room",component:st,options:function(e){var t=e.route.params.title;return t?{title:t,headerStatusBarHeight:0}:{title:"Compte supprim\xe9",headerStatusBarHeight:0}}})))},dt=n(39),pt=Object(s.b)((function(e){return{auth:e.auth}}),(function(e){return{logIn:function(t){return e(function(e){return{type:"REQUEST_LOG_IN",route:"/auth/login",payload:e,method:"POST",errorNotification:!0}}(t))}}}))((function(e){e.auth;var t=e.logIn,a=e.navigation,o=Object(c.useContext)(ie.f).theme,s=Object(c.useState)(""),u=i()(s,2),m=u[0],d=u[1],g=Object(c.useState)(""),f=i()(g,2),E=f[0],b=f[1],y=Object(c.useState)({}),h=i()(y,2),S=h[0],v=h[1];return l.a.createElement(p.a,{style:{flex:1,justifyContent:"center",alignItems:"center",paddingHorizontal:12,backgroundColor:"white"}},l.a.createElement(Me.a,{colors:[o.colors.primary,o.colors.secondary],start:[.25,1],end:[0,0],style:{flexDirection:"row",marginBottom:20,height:150,width:150,borderRadius:100}},l.a.createElement(dt.a,{source:n(686),style:{height:150,width:150,borderRadius:100}})),l.a.createElement(ie.e,{placeholder:"Email",leftIcon:l.a.createElement(ie.d,{name:"email",type:"material-community"}),value:m,onChangeText:function(e){return d(e)},label:"Email",errorStyle:{color:"red"},errorMessage:S.email}),l.a.createElement(ie.e,{placeholder:"Mot de passe",leftIcon:l.a.createElement(ie.d,{name:"lock"}),label:"Mot de passe",secureTextEntry:!0,value:E,containerStyle:{marginBottom:30,marginTop:8},onChangeText:function(e){return b(e)},errorStyle:{color:"red"},errorMessage:S.password}),l.a.createElement(ie.b,{title:"Se connecter",onPress:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=4;break}return e.abrupt("return",v({email:"M\xe9l invalide."}));case 4:if(E){e.next=6;break}return e.abrupt("return",v({password:"Mot de passe invalide."}));case 6:v({}),t({email:m,password:E});case 8:case"end":return e.stop()}}),null,null,null,Promise)},containerStyle:{marginBottom:20,marginTop:8}}),l.a.createElement(ie.b,{title:"Nouveau? Je m'enregistre.",type:"clear",onPress:function(){return a.navigate("SignUp")},containerStyle:{marginBottom:30}}))})),gt=Object(s.b)((function(e){return{auth:e.auth}}),(function(e){return{signUp:function(t){return e(function(e){return{type:"REQUEST_SIGN_UP",route:"/auth/signup",payload:e,method:"POST",successNotification:{message:'Bienvenue ! Rendez-vous \xe0 l\'onglet "Mon profil" pour \xe9diter vos informations.',variant:"success"},errorNotification:!0}}(t))}}}))((function(e){var t=e.signUp,n=e.auth,a=Object(c.useState)(""),o=i()(a,2),s=o[0],u=o[1],m=Object(c.useState)(""),d=i()(m,2),p=d[0],g=d[1],f=Object(c.useState)(""),E=i()(f,2),b=E[0],y=E[1],h=Object(c.useState)(""),S=i()(h,2),v=S[0],j=S[1],O=Object(c.useState)(""),C=i()(O,2),x=C[0],T=C[1],w=Object(c.useState)(""),R=i()(w,2),_=R[0],U=(R[1],Object(c.useState)({})),P=i()(U,2),A=P[0],k=P[1];return l.a.createElement(ve.a,{containerStyle:{justifyContent:"center",alignItems:"center"},style:{backgroundColor:"white",paddingHorizontal:12,paddingVertical:20,flex:1}},l.a.createElement(ie.e,{placeholder:"Pr\xe9nom",value:s,onChangeText:function(e){return u(e)},label:"Pr\xe9nom",errorMessage:A.firstname}),l.a.createElement(ie.e,{placeholder:"Nom",value:p,onChangeText:function(e){return g(e)},label:"Nom",errorMessage:A.lastname}),l.a.createElement(ie.e,{placeholder:"Email",leftIcon:l.a.createElement(ie.d,{name:"email",type:"material-community"}),value:b,onChangeText:function(e){return y(e)},label:"Email",errorMessage:A.email}),l.a.createElement(ie.e,{placeholder:"Mot de passe",leftIcon:l.a.createElement(ie.d,{name:"lock"}),label:"Mot de passe",secureTextEntry:!0,value:v,onChangeText:function(e){return j(e)},errorMessage:A.password}),l.a.createElement(ie.e,{placeholder:"Mot de passe",leftIcon:l.a.createElement(ie.d,{name:x!==v||v.length<8?"close":"check",color:x!==v||v.length<8?"red":"green"}),label:"Confirmation",secureTextEntry:!0,value:x,leftIconContainerStyle:{marginRight:12},onChangeText:function(e){return T(e)},errorMessage:A.confirmation}),l.a.createElement(ie.b,{title:"S'inscrire",onPress:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=4;break}return e.abrupt("return",k({firstname:"Pr\xe9nom manquant."}));case 4:if(p){e.next=8;break}return e.abrupt("return",k({lastname:"Nom manquant."}));case 8:if(b){e.next=12;break}return e.abrupt("return",k({mail:"M\xe9l manquant."}));case 12:if(v.length<8!==!0){e.next=16;break}return e.abrupt("return",k({password:"Mot de passe manquant."}));case 16:if(v===x){e.next=18;break}return e.abrupt("return",k({confirmation:"Veuillez retaper la confirmation de votre mot de passe."}));case 18:k({}),t({email:b,password:v,firstname:s,lastname:p,code:_});case 20:case"end":return e.stop()}}),null,null,null,Promise)},loading:n.isSigningUp,containerStyle:{marginBottom:20,marginTop:40}}))})),ft=Object(re.a)(),Et=function(){return l.a.createElement(p.a,{style:{flex:1}},l.a.createElement(ft.Navigator,{initialRouteName:"LogIn",headerMode:"screen"},l.a.createElement(ft.Screen,{name:"LogIn",component:pt,options:{headerShown:!1}}),l.a.createElement(ft.Screen,{name:"SignUp",component:gt,options:{title:"S'inscrire"}})))},bt=function(e){var t,n=e.searchBar,a=e.dispatchRedirectReset,o=e.theme,s=Object(c.useState)(n.initialValue),u=i()(s,2),m=u[0],d=u[1],g=Object(c.useState)([]),f=i()(g,2),E=f[0],b=f[1],y=function(e){var t,r=e.item;return l.a.createElement(ue.a,{onPress:function(){n.onPressSuggestion([r.value,r.title]),a()},style:yt.suggestion},l.a.createElement(le.a,null,r.title,null==(t=r.other)?void 0:t.map((function(e){return" - "+e}))))};return l.a.createElement(p.a,{style:yt.root},n.searchFor&&l.a.createElement(Ye.a,{autoFocus:!0,value:m,placeholder:n.placeholder,placeholderTextColor:"grey",onChangeText:function(e){return function(e){var t,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(d(e),""!==e){o.next=3;break}return o.abrupt("return",b([]));case 3:return o.next=5,r.a.awrap(Q.a.get(H+"/api/complete/"+n.searchFor+"/"+e));case 5:t=o.sent,a=t.data,b(a);case 8:case"end":return o.stop()}}),null,null,null,Promise)}(e)},style:[o.TextInput,{height:40,width:Fe.a.get("window").width-100}]}),l.a.createElement(_e.d,{style:yt.suggestionsContainer},E.map((function(e,t){return l.a.createElement(y,{item:e,key:t})})),null==(t=n.selectFrom)?void 0:t.map((function(e,t){return l.a.createElement(y,{item:e,key:t})}))))},yt=Ke.a.create({root:{backgroundColor:"white",borderRadius:10,paddingHorizontal:12,paddingVertical:8,elevation:1,shadowColor:"black",shadowOffset:{width:0,height:0},shadowOpacity:.5,shadowRadius:20},suggestionsContainer:{height:200},suggestion:{paddingHorizontal:2,paddingVertical:4}}),ht=function(e){var t,n,a,r=e.dateInput,o=e.dispatchRedirectReset,s=e.theme,u=Object(c.useState)((null==(t=r.initialValue)?void 0:t.getDate())||""),m=i()(u,2),d=m[0],g=m[1],f=Object(c.useState)((null==(n=r.initialValue)?void 0:n.getMonth())+1||""),E=i()(f,2),b=E[0],y=E[1],h=Object(c.useState)((null==(a=r.initialValue)?void 0:a.getYear())||""),S=i()(h,2),v=S[0],j=S[1],O=Object(c.useRef)(),C=Object(c.useRef)(),x=Object(c.useRef)();return 2===d.length&&C.current.focus(),2===b.length&&(d.length<2?O.current.focus():x.current.focus()),4===v.length&&(d.length<2?O.current.focus():b.length<2?b.current.focus():(r.onChangeText(new Date(v,b-1,d)),o())),l.a.createElement(p.a,{style:St.root},l.a.createElement(Ye.a,{autoFocus:!0,ref:O,value:d,style:[s.TextInput,St.input,{width:40}],placeholder:"DD",placeholderTextColor:"grey",onChangeText:function(e){return g(e)}}),l.a.createElement(le.a,null,"/"),l.a.createElement(Ye.a,{value:b,ref:C,placeholder:"MM",placeholderTextColor:"grey",onChangeText:function(e){return y(e)},style:[s.TextInput,St.input,{width:40}]}),l.a.createElement(le.a,null,"/"),l.a.createElement(Ye.a,{value:v,ref:x,placeholder:"YYYY",placeholderTextColor:"grey",onChangeText:function(e){return j(e)},style:[s.TextInput,St.input,{width:80}]}))},St=Ke.a.create({root:{backgroundColor:"white",borderRadius:10,paddingHorizontal:12,paddingVertical:8,elevation:1,shadowColor:"black",shadowOffset:{width:0,height:0},shadowOpacity:.5,shadowRadius:20},input:{height:40,textAlign:"center",marginHorizontal:8}}),vt=function(e){var t=e.notification,n=e.theme;return l.a.createElement(p.a,{style:jt.root},l.a.createElement(ie.d,{containerStyle:{marginBottom:8},size:30,name:"success"===t.variant?"check-circle-outline":"warning"===t.variant?"alert-circle-outline":"error"===t.variant?"close-circle-outline":t.icon,color:"success"===t.variant?"green":"warning"===t.variant?"yellow":"error"===t.variant?"red":"info"===t.variant?"blue":n.colors.grey1}),t.message&&l.a.createElement(le.a,{style:{fontSize:14}},t.message))},jt=Ke.a.create({root:{backgroundColor:"white",borderRadius:10,paddingHorizontal:12,paddingVertical:8,elevation:1,shadowColor:"black",shadowOffset:{width:0,height:0},shadowOpacity:.5,shadowRadius:20}}),Ot=function(e){var t,n=e.menu,a=e.dispatchRedirectReset,r=e.dispatch;return React.createElement(View,{style:{backgroundColor:"white",borderRadius:10,justifyContent:"center",alignItems:"center",paddingHorizontal:12,paddingVertical:8,elevation:8}},null==(t=n.buttons)?void 0:t.map((function(e,t){return React.createElement(Button,{title:e.title,key:t,containerStyle:{height:30},onPress:function(){r(e.action.apply(e,b()(e.actionParams))),a()}})})))},Ct=function(){var e=Object(s.d)((function(e){return e.overlay})),t=Object(c.useContext)(ie.f).theme,n=Object(s.c)();if(!1===e.show)return null;var a=function(){n({type:"RESET_OVERLAY"}),Array.isArray(e.callbacks)&&e.callbacks.forEach((function(e){n(e())})),e.redirect&&ge(e.redirect,e.redirectOpts)};return e.timeout&&setTimeout((function(){a()}),e.timeout),l.a.createElement(p.a,{style:[xt.root]},l.a.createElement(_e.g,{containerStyle:xt.sides,style:xt.sides,onPress:function(){e.notification?a():n({type:"RESET_OVERLAY"})}}),l.a.createElement(p.a,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center"}},l.a.createElement(_e.g,{containerStyle:xt.sides,style:xt.sides,onPress:function(){e.notification?a():n({type:"RESET_OVERLAY"})}}),e.notification&&l.a.createElement(vt,{notification:e.notification,dispatchRedirectReset:a,theme:t}),e.form&&l.a.createElement(InputForm,{form:e.form,dispatchRedirectReset:a,dispatch:n,theme:t}),e.menu&&l.a.createElement(Ot,{menu:e.menu,dispatchRedirectReset:a,dispatch:n}),e.searchBar&&l.a.createElement(bt,{searchBar:e.searchBar,dispatchRedirectReset:a,theme:t}),e.dateInput&&l.a.createElement(ht,{dateInput:e.dateInput,dispatchRedirectReset:a,theme:t}),l.a.createElement(_e.g,{containerStyle:xt.sides,style:xt.sides,onPress:function(){e.notification?a():n({type:"RESET_OVERLAY"})}})),l.a.createElement(_e.g,{containerStyle:xt.sides,style:xt.sides,onPress:function(){e.notification?a():n({type:"RESET_OVERLAY"})}}))},xt=Ke.a.create({root:{position:"absolute",height:Fe.a.get("window").height,width:Fe.a.get("window").width,alignContent:"center",justifyContent:"center",alignItems:"stretch",backgroundColor:"rgba(200,200,200,0.5)"},sides:{flex:1,minHeight:12}}),Tt=n(419),wt=n(423),Rt=Object(ae.a)(),_t=Object(oe.a)(),Ut=Object(re.a)(),Pt=function(){return l.a.createElement(Rt.Navigator,{initialRouteName:"People",screenOptions:function(e){var t=e.route;return{tabBarIcon:function(e){e.focused;var n,a=e.color,r=e.size;switch(t.name){case"Home":n="home";break;case"Jobs":n="briefcase";break;case"People":n="account-group";break;case"Messages":n="forum"}return l.a.createElement(ie.d,{name:n,size:r,color:a})}}},tabBarOptions:{activeTintColor:Re.colors.primary,inactiveTintColor:"gray"}},l.a.createElement(Rt.Screen,{name:"People",component:ot,options:{title:"Annuaire"}}),l.a.createElement(Rt.Screen,{name:"Jobs",component:Ve,options:{title:"Emplois"}}),l.a.createElement(Rt.Screen,{name:"Messages",component:mt,options:{title:"Messages"}}))},At=function(){var e=Object(s.c)();return l.a.useEffect((function(){e({type:"REQUEST_JOBS",route:"jobs",method:"GET"}),e({type:"REQUEST_MY_JOBS",route:"jobs/me",method:"GET"}),e({type:"REQUEST_USERS",method:"GET",route:"users"}),e({type:"REQUEST_CONVERSATIONS",method:"GET",route:"conversations"})}),[]),l.a.createElement(_t.Navigator,{initialRouteName:"Main",headerMode:"screen"},l.a.createElement(_t.Screen,{name:"Main",component:Pt,options:{title:"Accueil"}}),l.a.createElement(_t.Screen,{name:"Profile",component:Ge,options:{title:"Mon profil"}}),l.a.createElement(_t.Screen,{name:"MyJobs",component:xe,options:{title:"Mes offres d'emplois"}}))},kt=function(e){var t,n=l.a.useState(!1),a=i()(n,2),o=a[0],c=a[1],u=l.a.useState(),m=i()(u,2),d=m[0],g=m[1],f=(t=pe,Object(Tt.a)(t,{prefixes:[wt.a.makeUrl("/")],config:{Auth:{path:"auth",screens:{LogIn:"login",SignUp:"signup"}},Root:{path:"root",screens:{Main:{path:"main",screens:{Jobs:{path:"emplois",screens:{List:"emplois",Read:"emplois/:id",Post:"emplois/poster"}},People:{path:"annuaire",screens:{List:"annuaire",Read:"annuaire/:id"}},Messages:{path:"messagerie",screens:{Lobby:"messagerie",Room:"messagerie/:conversation_id"}}}},Profile:{path:"mon-profil",Read:"mon-profil",Edit:"mon-profil/modifier"},MyJobs:{path:"mes-offres",Read:"mes-offres",Edit:"mes-offres/:id"}}}}})).getInitialState,E=Object(s.c)(),b=Object(s.d)((function(e){return e.auth.token}));return console.log("AppStack -> userToken",b),l.a.useEffect((function(){r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==b&&E({type:"REQUEST_VERIFY_TOKEN",route:"auth/token/verify",method:"GET",errorNotification:!0}),e.prev=1,ce.a.preventAutoHide(),e.t0=g,e.next=6,r.a.awrap(f());case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 10:e.prev=10,e.t2=e.catch(1),console.warn(e.t2);case 13:return e.prev=13,c(!0),ce.a.hide(),e.finish(13);case 17:case"end":return e.stop()}}),null,null,[[1,10,13,17]],Promise)}),[]),o||e.skipLoadingScreen?l.a.createElement(p.a,{style:{flex:1}},l.a.createElement(ne.a,{ref:pe,initialState:d},l.a.createElement(Ut.Navigator,{headerMode:"none"},b&&l.a.createElement(Ut.Screen,{name:"Root",component:At}),!b&&l.a.createElement(Ut.Screen,{name:"Auth",component:Et})),l.a.createElement(Ct,null))):null};t.a=function(){return l.a.useEffect((function(){return console.log("Platform.OS",m.a.OS),de.current=!0,function(){return de.current=!1}}),[]),l.a.createElement(s.a,{store:$},l.a.createElement(te.a,{loading:null,persistor:ee},l.a.createElement(ie.g,{theme:Re},l.a.createElement(u.a,{style:{flex:1,flexDirection:"row",justifyContent:"center"}},"ios"===m.a.OS&&l.a.createElement(d.a,{barStyle:"default"}),l.a.createElement(kt,null)))))}},494:function(e,t,n){n(495),e.exports=n(496)},495:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},537:function(e,t){},55:function(e){e.exports=JSON.parse('{"colors":{"primary":"rgba(51,122,183,1)","primaryLight":"rgba(120,160,200,1)","secondary":"#2c2346","grey0":"rgba(66, 66, 66, 1)","grey1":"rgba(100, 100, 100, 1)","grey2":"rgba(133, 133, 133, 1)","grey3":"rgba(166, 166, 166, 1)","grey4":"rgba(200, 200, 200, 1)","grey5":"rgba(245, 245, 245, 1)","grey6":"rgba(100, 100, 100, 0.4)","greyOutline":"grey1","error":"rgba(207, 42, 42, 1)","success":"rgba(52, 186, 69, 1)","divider":"rgba(133, 133, 133, 1)"},"Button":{"containerStyle":{"marginBottom":8}},"Avatar":{"rounded":true},"Icon":{"type":"material-community"},"Input":{"containerStyle":{"marginBottom":12,"maxWidth":500},"leftIconContainerStyle":{"marginRight":12}},"ButtonGroup":{"containerStyle":{"marginBottom":16,"height":40}},"Overlay":{"overlayStyle":{"marginHorizontal":12,"paddingHorizontal":20,"borderRadius":12,"paddingVertical":16}}}')},676:function(e,t,n){var a={"./af":282,"./af.js":282,"./ar":283,"./ar-dz":284,"./ar-dz.js":284,"./ar-kw":285,"./ar-kw.js":285,"./ar-ly":286,"./ar-ly.js":286,"./ar-ma":287,"./ar-ma.js":287,"./ar-sa":288,"./ar-sa.js":288,"./ar-tn":289,"./ar-tn.js":289,"./ar.js":283,"./az":290,"./az.js":290,"./be":291,"./be.js":291,"./bg":292,"./bg.js":292,"./bm":293,"./bm.js":293,"./bn":294,"./bn.js":294,"./bo":295,"./bo.js":295,"./br":296,"./br.js":296,"./bs":297,"./bs.js":297,"./ca":298,"./ca.js":298,"./cs":299,"./cs.js":299,"./cv":300,"./cv.js":300,"./cy":301,"./cy.js":301,"./da":302,"./da.js":302,"./de":303,"./de-at":304,"./de-at.js":304,"./de-ch":305,"./de-ch.js":305,"./de.js":303,"./dv":306,"./dv.js":306,"./el":307,"./el.js":307,"./en-SG":308,"./en-SG.js":308,"./en-au":309,"./en-au.js":309,"./en-ca":310,"./en-ca.js":310,"./en-gb":311,"./en-gb.js":311,"./en-ie":312,"./en-ie.js":312,"./en-il":313,"./en-il.js":313,"./en-nz":314,"./en-nz.js":314,"./eo":315,"./eo.js":315,"./es":316,"./es-do":317,"./es-do.js":317,"./es-us":318,"./es-us.js":318,"./es.js":316,"./et":319,"./et.js":319,"./eu":320,"./eu.js":320,"./fa":321,"./fa.js":321,"./fi":322,"./fi.js":322,"./fo":323,"./fo.js":323,"./fr":98,"./fr-ca":324,"./fr-ca.js":324,"./fr-ch":325,"./fr-ch.js":325,"./fr.js":98,"./fy":326,"./fy.js":326,"./ga":327,"./ga.js":327,"./gd":328,"./gd.js":328,"./gl":329,"./gl.js":329,"./gom-latn":330,"./gom-latn.js":330,"./gu":331,"./gu.js":331,"./he":332,"./he.js":332,"./hi":333,"./hi.js":333,"./hr":334,"./hr.js":334,"./hu":335,"./hu.js":335,"./hy-am":336,"./hy-am.js":336,"./id":337,"./id.js":337,"./is":338,"./is.js":338,"./it":339,"./it-ch":340,"./it-ch.js":340,"./it.js":339,"./ja":341,"./ja.js":341,"./jv":342,"./jv.js":342,"./ka":343,"./ka.js":343,"./kk":344,"./kk.js":344,"./km":345,"./km.js":345,"./kn":346,"./kn.js":346,"./ko":347,"./ko.js":347,"./ku":348,"./ku.js":348,"./ky":349,"./ky.js":349,"./lb":350,"./lb.js":350,"./lo":351,"./lo.js":351,"./lt":352,"./lt.js":352,"./lv":353,"./lv.js":353,"./me":354,"./me.js":354,"./mi":355,"./mi.js":355,"./mk":356,"./mk.js":356,"./ml":357,"./ml.js":357,"./mn":358,"./mn.js":358,"./mr":359,"./mr.js":359,"./ms":360,"./ms-my":361,"./ms-my.js":361,"./ms.js":360,"./mt":362,"./mt.js":362,"./my":363,"./my.js":363,"./nb":364,"./nb.js":364,"./ne":365,"./ne.js":365,"./nl":366,"./nl-be":367,"./nl-be.js":367,"./nl.js":366,"./nn":368,"./nn.js":368,"./pa-in":369,"./pa-in.js":369,"./pl":370,"./pl.js":370,"./pt":371,"./pt-br":372,"./pt-br.js":372,"./pt.js":371,"./ro":373,"./ro.js":373,"./ru":374,"./ru.js":374,"./sd":375,"./sd.js":375,"./se":376,"./se.js":376,"./si":377,"./si.js":377,"./sk":378,"./sk.js":378,"./sl":379,"./sl.js":379,"./sq":380,"./sq.js":380,"./sr":381,"./sr-cyrl":382,"./sr-cyrl.js":382,"./sr.js":381,"./ss":383,"./ss.js":383,"./sv":384,"./sv.js":384,"./sw":385,"./sw.js":385,"./ta":386,"./ta.js":386,"./te":387,"./te.js":387,"./tet":388,"./tet.js":388,"./tg":389,"./tg.js":389,"./th":390,"./th.js":390,"./tl-ph":391,"./tl-ph.js":391,"./tlh":392,"./tlh.js":392,"./tr":393,"./tr.js":393,"./tzl":394,"./tzl.js":394,"./tzm":395,"./tzm-latn":396,"./tzm-latn.js":396,"./tzm.js":395,"./ug-cn":397,"./ug-cn.js":397,"./uk":398,"./uk.js":398,"./ur":399,"./ur.js":399,"./uz":400,"./uz-latn":401,"./uz-latn.js":401,"./uz.js":400,"./vi":402,"./vi.js":402,"./x-pseudo":403,"./x-pseudo.js":403,"./yo":404,"./yo.js":404,"./zh-cn":405,"./zh-cn.js":405,"./zh-hk":406,"./zh-hk.js":406,"./zh-tw":407,"./zh-tw.js":407};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=676},686:function(e,t,n){e.exports=n.p+"static/media/logo.ccfb714c.png"}},[[494,1,2]]]);
//# sourceMappingURL=app.d21054fd.chunk.js.map